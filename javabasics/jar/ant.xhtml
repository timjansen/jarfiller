<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:page="http://tjansen.de/refPage" xmlns:i="http://tjansen.de/internal"><head><title>How to Create JARs with Ant - Java Basics: JAR Files</title><meta http-equiv="X-UA-Compatible" content="chrome=1"/><meta http-equiv="content-language" content="en"/><link rel="shortcut icon" href="../../images/favicon.png" type="image/png"/><link rel="stylesheet" type="text/css" href="../../style/style.css"/><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-6791190-2']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
})();
</script><script type="text/javascript" src="../../js/all.js"/></head><body id="body"><div id="visibleContent"><div id="top"><a href="/"><img src="../../images/titlebar.png" alt="Jarfiller.com"/></a></div><div id="main"><div id="bodycolumn"><div class="yahbar"><div class="yahprev"><a href="eclipse.xhtml">Prev</a></div><h3 class="yahhere"><a href="#" onclick="return navToggle();">Java Basics: JAR Files / How to...</a></h3></div><h1 id="sec_howto" class="multipageTitle">How to Create JARs with Ant</h1><div class="subSecRow2" id="sec_ant"><div class="subSecHead" id="sechd_ant"><a name="ant">Ant</a></div><div class="subSecContent" id="seccnt_ant"><p class="subSecExplanation"> <a href="http://ant.apache.org">Ant</a> provides the tasks <span class="idf">Jar</span>, <span class="idf">SignJar</span> and <span class="idf">Manifest</span> to help you create JAR files. Creating a JAR from the files in a directory is as easy as: </p><pre class="subSecConfig">&lt;jar <a href="#" id="tl-d37368e2090" class="tooltip" onclick="return tlClick('tl-d37368e2090','pp-d37368e394');" onmouseover="return tlOver('tl-d37368e2090','pp-d37368e394');" onmouseout="return tlOut('tl-d37368e2090','pp-d37368e394');">destfile</a>="${dist}/example.jar" <a href="#" id="tl-d37368e2093" class="tooltip" onclick="return tlClick('tl-d37368e2093','pp-d37368e399');" onmouseover="return tlOver('tl-d37368e2093','pp-d37368e399');" onmouseout="return tlOut('tl-d37368e2093','pp-d37368e399');">basedir</a>="${build}"/&gt;</pre><p class="subSecExplanation">For more complex archives, filesets can be used and a manifest can be specified: </p><pre class="subSecConfig">&lt;jar <a href="#" id="tl-d37368e2102" class="tooltip" onclick="return tlClick('tl-d37368e2102','pp-d37368e394');" onmouseover="return tlOver('tl-d37368e2102','pp-d37368e394');" onmouseout="return tlOut('tl-d37368e2102','pp-d37368e394');">destfile</a>="${dist}/example.jar" <a href="#" id="tl-d37368e2105" class="tooltip" onclick="return tlClick('tl-d37368e2105','pp-d37368e404');" onmouseover="return tlOver('tl-d37368e2105','pp-d37368e404');" onmouseout="return tlOut('tl-d37368e2105','pp-d37368e404');">manifest</a>="${src}/manifest/MANIFEST.MF"&gt;
  &lt;fileset dir="${build}" excludes="**/test/*.class"/&gt;
  &lt;fileset dir="${src}/images"/&gt;
&lt;/jar&gt;</pre><p class="subSecExplanation">Ant is also able of extracting and adding other JARs. The <a href="#" id="tl-d37368e2111" class="tooltip" onclick="return tlClick('tl-d37368e2111','pp-d37368e409');" onmouseover="return tlOver('tl-d37368e2111','pp-d37368e409');" onmouseout="return tlOut('tl-d37368e2111','pp-d37368e409');">filesetmanifest</a> attribute specifies what to do with their manifests (the default is to skip them):</p><pre class="subSecConfig">&lt;jar <a href="#" id="tl-d37368e2118" class="tooltip" onclick="return tlClick('tl-d37368e2118','pp-d37368e394');" onmouseover="return tlOver('tl-d37368e2118','pp-d37368e394');" onmouseout="return tlOut('tl-d37368e2118','pp-d37368e394');">destfile</a>="${dist}/example.jar" <a href="#" id="tl-d37368e2121" class="tooltip" onclick="return tlClick('tl-d37368e2121','pp-d37368e404');" onmouseover="return tlOver('tl-d37368e2121','pp-d37368e404');" onmouseout="return tlOut('tl-d37368e2121','pp-d37368e404');">manifest</a>="${src}/manifest/MANIFEST.MF"
    <a href="#" id="tl-d37368e2124" class="tooltip" onclick="return tlClick('tl-d37368e2124','pp-d37368e409');" onmouseover="return tlOver('tl-d37368e2124','pp-d37368e409');" onmouseout="return tlOut('tl-d37368e2124','pp-d37368e409');">filesetmanifest</a>="mergewithoutmain"&gt;
  &lt;fileset dir="${build}" excludes="**/test/*.class"/&gt;
  &lt;zipfileset src="${lib}/helper.jar"/&gt;
  &lt;zipfileset src="${lib}/util.jar"/&gt;
&lt;/jar&gt;</pre><p class="subSecExplanation">Instead of providing a manifest file, you can also use Ant to generate one. You can either create a file with the <span class="idf">Manifest</span> task, or embed a manifest into your <span class="idf">Jar</span> trask:</p><pre class="subSecConfig">&lt;jar <a href="#" id="tl-d37368e2139" class="tooltip" onclick="return tlClick('tl-d37368e2139','pp-d37368e394');" onmouseover="return tlOver('tl-d37368e2139','pp-d37368e394');" onmouseout="return tlOut('tl-d37368e2139','pp-d37368e394');">destfile</a>="${dist}/example.jar"&gt;
  &lt;manifest&gt;
    &lt;<a href="#" id="tl-d37368e2142" class="tooltip" onclick="return tlClick('tl-d37368e2142','pp-d37368e417');" onmouseover="return tlOver('tl-d37368e2142','pp-d37368e417');" onmouseout="return tlOut('tl-d37368e2142','pp-d37368e417');">attribute</a> name="Main-Class" value="com.jarfiller.example.MainClass"/&gt;
    &lt;<a href="#" id="tl-d37368e2145" class="tooltip" onclick="return tlClick('tl-d37368e2145','pp-d37368e417');" onmouseover="return tlOver('tl-d37368e2145','pp-d37368e417');" onmouseout="return tlOut('tl-d37368e2145','pp-d37368e417');">attribute</a> name="Implementation-Title" value="Jarfiller Example"/&gt;

    &lt;<a href="#" id="tl-d37368e2148" class="tooltip" onclick="return tlClick('tl-d37368e2148','pp-d37368e422');" onmouseover="return tlOver('tl-d37368e2148','pp-d37368e422');" onmouseout="return tlOut('tl-d37368e2148','pp-d37368e422');">section</a> name="com/jarfiller/example"&gt;
      &lt;<a href="#" id="tl-d37368e2151" class="tooltip" onclick="return tlClick('tl-d37368e2151','pp-d37368e417');" onmouseover="return tlOver('tl-d37368e2151','pp-d37368e417');" onmouseout="return tlOut('tl-d37368e2151','pp-d37368e417');">attribute</a> name="Sealed" value="true"/&gt;
    &lt;/section&gt;
    &lt;<a href="#" id="tl-d37368e2155" class="tooltip" onclick="return tlClick('tl-d37368e2155','pp-d37368e422');" onmouseover="return tlOver('tl-d37368e2155','pp-d37368e422');" onmouseout="return tlOut('tl-d37368e2155','pp-d37368e422');">section</a> name="com/jarfiller/helper"&gt;
      &lt;<a href="#" id="tl-d37368e2158" class="tooltip" onclick="return tlClick('tl-d37368e2158','pp-d37368e417');" onmouseover="return tlOver('tl-d37368e2158','pp-d37368e417');" onmouseout="return tlOut('tl-d37368e2158','pp-d37368e417');">attribute</a> name="Sealed" value="true"/&gt;
    &lt;/section&gt;
  &lt;/manifest&gt;
  &lt;fileset dir="${build}" excludes="**/test/*.class"/&gt;
  &lt;fileset dir="${src}/images"/&gt;
&lt;/jar&gt;</pre><p class="subSecExplanation">To sign JARs with Ant, use the <span class="idf">SignJar</span> task:</p><pre class="subSecConfig">&lt;signjar <a href="#" id="tl-d37368e2170" class="tooltip" onclick="return tlClick('tl-d37368e2170','pp-d37368e428');" onmouseover="return tlOver('tl-d37368e2170','pp-d37368e428');" onmouseout="return tlOut('tl-d37368e2170','pp-d37368e428');">jar</a>="${dist}/example.jar" <a href="#" id="tl-d37368e2173" class="tooltip" onclick="return tlClick('tl-d37368e2173','pp-d37368e433');" onmouseover="return tlOver('tl-d37368e2173','pp-d37368e433');" onmouseout="return tlOut('tl-d37368e2173','pp-d37368e433');">keystore</a>="myKeystore" <a href="#" id="tl-d37368e2176" class="tooltip" onclick="return tlClick('tl-d37368e2176','pp-d37368e443');" onmouseover="return tlOver('tl-d37368e2176','pp-d37368e443');" onmouseout="return tlOut('tl-d37368e2176','pp-d37368e443');">storepass</a>="password" <a href="#" id="tl-d37368e2179" class="tooltip" onclick="return tlClick('tl-d37368e2179','pp-d37368e438');" onmouseover="return tlOver('tl-d37368e2179','pp-d37368e438');" onmouseout="return tlOut('tl-d37368e2179','pp-d37368e438');">alias</a>="myKey"/&gt;</pre><p class="subSecExplanation">It is also possible to sign several JARs in a single task, and to create new JARs instead of modifying existing JARs:</p><pre class="subSecConfig">&lt;signjar <a href="#" id="tl-d37368e2189" class="tooltip" onclick="return tlClick('tl-d37368e2189','pp-d37368e448');" onmouseover="return tlOver('tl-d37368e2189','pp-d37368e448');" onmouseout="return tlOut('tl-d37368e2189','pp-d37368e448');">destDir</a>="signed" <a href="#" id="tl-d37368e2192" class="tooltip" onclick="return tlClick('tl-d37368e2192','pp-d37368e453');" onmouseover="return tlOver('tl-d37368e2192','pp-d37368e453');" onmouseout="return tlOut('tl-d37368e2192','pp-d37368e453');">lazy</a>="true" <a href="#" id="tl-d37368e2195" class="tooltip" onclick="return tlClick('tl-d37368e2195','pp-d37368e463');" onmouseover="return tlOver('tl-d37368e2195','pp-d37368e463');" onmouseout="return tlOut('tl-d37368e2195','pp-d37368e463');">preservelastmodified</a>="true"
      <a href="#" id="tl-d37368e2198" class="tooltip" onclick="return tlClick('tl-d37368e2198','pp-d37368e433');" onmouseover="return tlOver('tl-d37368e2198','pp-d37368e433');" onmouseout="return tlOut('tl-d37368e2198','pp-d37368e433');">keystore</a>="myKeystore" <a href="#" id="tl-d37368e2201" class="tooltip" onclick="return tlClick('tl-d37368e2201','pp-d37368e443');" onmouseover="return tlOver('tl-d37368e2201','pp-d37368e443');" onmouseout="return tlOut('tl-d37368e2201','pp-d37368e443');">storepass</a>="password" <a href="#" id="tl-d37368e2205" class="tooltip" onclick="return tlClick('tl-d37368e2205','pp-d37368e438');" onmouseover="return tlOver('tl-d37368e2205','pp-d37368e438');" onmouseout="return tlOut('tl-d37368e2205','pp-d37368e438');">alias</a>="myKey"&gt;
  &lt;path&gt;
    &lt;fileset dir="${dist}" includes="**/*.jar" /&gt;
  &lt;/path&gt;
&lt;/signjar&gt;</pre></div></div><div class="yahbar"><div class="yahprev"><a href="eclipse.xhtml">Prev<br/><span>How to Create JARs with Eclipse</span></a></div><div class="yahhere"><a href="#" onclick="return navToggle();">Java Basics: JAR Files / How to...</a><br/><a href="/javabasics/jar/"><span>Single Page Mode</span></a>, <a href="#" onclick="return navToggle();"><span>Show Table of Content</span></a></div></div></div><div id="sidecolumn">
  	  	<div><h3>Useful Links</h3><div class="sidecolumnSubTitleLine"/>
  			<a href="http://java.sun.com/javase/6/docs/technotes/guides/jar/index.html">Java Documentation</a><br/>
  			<a href="http://java.sun.com/javase/6/docs/technotes/guides/jar/jar.html">JAR File Specification</a><br/>
  			<a href="http://en.wikipedia.org/wiki/JAR_(file_format)">JAR on Wikipedia</a><br/>
  		</div>
  </div></div></div><div id="footer"><div id="footer-content"><div id="footer-left"><div class="footerLine"><a href="/">Home</a> - <a href="/about">About Jarfiller</a> - <a href="/imprint.xhtml">Imprint</a></div><div class="footerLine">Please send feedback and corrections to <a href="mailto:tim@tjansen.de">tim@<span style="display: none">got you</span>tjansen.de</a>.</div><div class="footerLine"><a href="http://www.twitter.com/timjansen">Follow</a> me on Twitter.</div><div class="copyrightLine">© 2010 Tim Jansen; content licensed under <a href="http://creativecommons.org/licenses/by/3.0/us/">cc-by</a>; example source code is public domain
				</div></div><div id="footer-right"><a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="../../images/ext/cc-by-88x31.png"/></a></div></div></div><div id="navbar" onclick="return navToggle();" onmouseover="document.getElementById('navbar').className='mouseover';" onmouseout="document.getElementById('navbar').className='';"/><div id="navcontainer"><div id="navlinks"><div id="navclosebar"><a href="#" onclick="return navClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div><div id="navpositionbar" class="navpositionbar"/><h2 id="navtitle">Java Basics: JAR Files</h2><a id="nav_overview" class="navseclink" href="overview.xhtml#overview">Overview</a><a id="nav_intro" class="navsublink" href="overview.xhtml#intro">Intro</a><a id="nav_usecases" class="navsublink" href="overview.xhtml#usecases">When to use JARs</a><a id="nav_requirements" class="navsublink" href="overview.xhtml#requirements">Requirements</a><a id="nav_creatingjars" class="navseclink" href="creatingjars.xhtml#creatingjars">Creating JARs</a><a id="nav_structure" class="navsublink" href="creatingjars.xhtml#structure">Structure</a><a id="nav_manifest" class="navsublink" href="creatingjars.xhtml#manifest">Manifest</a><a id="nav_jartool" class="navsublink" href="creatingjars.xhtml#jartool">jar tool</a><span class="navseclink">How to...</span><a id="nav_executables" class="navsublink" href="executables.xhtml#executables">How to Start an Executable JAR</a><a id="nav_viewextract" class="navsublink" href="viewextract.xhtml#viewextract">How to View and Extract a JAR</a><a id="nav_libraries" class="navsublink" href="libraries.xhtml#libraries">How to Add Libraries to a JAR</a><a id="nav_selfsigning" class="navsublink" href="selfsigning.xhtml#selfsigning">How to Create a (Self-)Signed Jar</a><a id="nav_certification" class="navsublink" href="certification.xhtml#certification">How to Sign a Jar with a Valid Certificate</a><a id="nav_perentry" class="navsublink" href="perentry.xhtml#perentry">How to Specify Attributes For Single Packages (Per-Entry Attributes)</a><a id="nav_sealing" class="navsublink" href="sealing.xhtml#sealing">How to Seal Packages in a JAR</a><a id="nav_jarmetadata" class="navsublink" href="jarmetadata.xhtml#jarmetadata">How to Get Package Versioning Information</a><a id="nav_eclipse" class="navsublink" href="eclipse.xhtml#eclipse">How to Create JARs with Eclipse</a><a id="nav_ant" class="navsublink" href="ant.xhtml#ant">How to Create JARs with Ant</a></div></div><div id="popups"><div id="pp-d37368e394" class="tooltip"><span class="idf">destfile</span> specifies the path of the JAR to create.</div><div id="pp-d37368e399" class="tooltip"><span class="idf">basedir</span> specifies the root directory of the file to add to the JAR.</div><div id="pp-d37368e404" class="tooltip"><span class="idf">manifest</span> specifies the path of a manifest to include.</div><div id="pp-d37368e409" class="tooltip"><span class="idf">filesetmanifest</span> defines what to do with the manifests of extracted JARs. Valid options are "skip" (default), "merge" and "mergewithoutmain" (tries to merge manifests, but ignores <span class="idf">Main-Class</span> attributes).</div><div id="pp-d37368e417" class="tooltip"><span class="idf">attribute</span> specifies an attribute to appear in the manifest.</div><div id="pp-d37368e422" class="tooltip"><span class="idf">section</span> defines a section containing per-entry attributes.</div><div id="pp-d37368e428" class="tooltip"><span class="idf">jar</span> specifies the name of the JAR to sign.</div><div id="pp-d37368e433" class="tooltip"><span class="idf">keystore</span> specifies the path of the keystore to use.</div><div id="pp-d37368e438" class="tooltip"><span class="idf">alias</span> contains the name of the key to use from the keystore.</div><div id="pp-d37368e443" class="tooltip"><span class="idf">storepass</span> is the password to use for the keystore. Obviously you should be careful only to use development keys in your ant file, if any, but never any production passwords.</div><div id="pp-d37368e448" class="tooltip"><span class="idf">destDir</span> specifies the destination directory for signed JARs, if you don't want to modify the existing JARs. If you omit it, the exististing JARs will be signed.</div><div id="pp-d37368e453" class="tooltip">If <span class="idf">lazy</span> is <span class="idf">true</span>, only files that are not already signed will be signed.</div><div id="pp-d37368e463" class="tooltip">If <span class="idf">preservelastmodified</span> is <span class="idf">true</span>, the resulting signed JARs will have the same last-modified date as the unsigned JARs.</div><div id="ttCloseBar" class="closeBar"><a href="#" onclick="return tlClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div><div id="topicCloseBar" class="closeBar"><a href="#" onclick="return tpcClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div></div></body></html>