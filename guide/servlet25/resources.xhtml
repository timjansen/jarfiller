<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:page="http://tjansen.de/refPage" xmlns:i="http://tjansen.de/internal"><head><title>Resources - Servlet 2.5 Guide</title><meta http-equiv="X-UA-Compatible" content="chrome=1"/><meta http-equiv="content-language" content="en"/><link rel="shortcut icon" href="../../images/favicon.png" type="image/png"/><link rel="stylesheet" type="text/css" href="../../style/style.css"/><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-6791190-2']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
})();
</script><script type="text/javascript" src="../../js/all.js"/></head><body id="body"><div id="visibleContent"><div id="top"><a href="/"><img src="../../images/titlebar.png" alt="Jarfiller.com"/></a></div><div id="main"><div id="bodycolumn"><div class="yahbar"><div class="yahprev"><a href="sessionsandcookies.xhtml">Prev</a></div><h3 class="yahhere"><a href="#" onclick="return navToggle();">Servlet 2.5 Guide / Resources</a></h3><div class="yahnext"><a href="customheaders.xhtml">Next</a></div></div><h1 id="sec_resources" class="multipageTitle"><a name="resources">Resources</a></h1><div class="subSecRow2" id="sec_resourceannotations"><div class="subSecHead" id="sechd_resourceannotations"><a name="resourceannotations">Resource Annotations</a></div><div class="subSecContent" id="seccnt_resourceannotations"><p class="subSecExplanation">To configure your servlet for the web container's environment, <em>declare required resources with the <a href="http://java.sun.com/javaee/5/docs/api/javax/annotation/Resource.html" class="javadoc">@Resource</a> annotation</em> in the servlet. The container will <em>inject those resources right after instantiation</em> (but before <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/GenericServlet.html#init(javax.servlet.ServletConfig)" class="javadoc">init</a> is called).<br/> The <a href="#" id="tl-d22757e5630" class="dottedTooltip" onclick="return tlClick('tl-d22757e5630','pp-d22757e5633');" onmouseover="return tlOver('tl-d22757e5630','pp-d22757e5633');" onmouseout="return tlOut('tl-d22757e5630','pp-d22757e5633');">deployer</a> is responsible for configuring the web container to provide the values required by the application. The <em>configuration itself is container-specific</em>. </p><p class="subSecExplanation">The following Servlet declares a requirement for a String and a JDBC <a href="http://java.sun.com/javase/6/docs/api/javax/sql/DataSource.html" class="javadoc">DataSource</a>:</p><pre class="subSecCode"><code>package com.jarfiller.example;

import <a href="http://java.sun.com/javase/6/docs/api/javax/sql/package-summary.html" class="javadoc">javax.sql.*</a>;
import <a href="http://java.sun.com/javase/6/docs/api/java/sql/package-summary.html" class="javadoc">java.sql.*</a>;
import <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/package-summary.html" class="javadoc">javax.servlet.http.*</a>;
import <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/package-summary.html" class="javadoc">javax.servlet.*</a>;
import <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/javax.annotation.*.html" class="javadoc">javax.annotation.*</a>;
import <a href="http://java.sun.com/javase/6/docs/api/java/io/package-summary.html" class="javadoc">java.io.*</a>;

public class ResourceServlet extends <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html" class="javadoc">HttpServlet</a> {

  <em><a href="http://java.sun.com/javaee/5/docs/api/javax/annotation/Resource.html" class="javadoc">@Resource</a>(name="jdbc/db")</em>
  private <a href="http://java.sun.com/javase/6/docs/api/javax/sql/DataSource.html" class="javadoc">DataSource</a> db;                           <span class="cmt">// inject database connection (<a href="#" id="tl-d22757e5719" class="dottedTooltip" onclick="return tlClick('tl-d22757e5719','pp-d22757e5719');" onmouseover="return tlOver('tl-d22757e5719','pp-d22757e5719');" onmouseout="return tlOut('tl-d22757e5719','pp-d22757e5719');">more</a>)</span>

  <em><a href="http://java.sun.com/javaee/5/docs/api/javax/annotation/Resource.html" class="javadoc">@Resource</a>(name="param/webmaster")</em>
  private String webmaster;                        <span class="cmt">// inject string (<a href="#" id="tl-d22757e5746" class="dottedTooltip" onclick="return tlClick('tl-d22757e5746','pp-d22757e5746');" onmouseover="return tlOver('tl-d22757e5746','pp-d22757e5746');" onmouseout="return tlOut('tl-d22757e5746','pp-d22757e5746');">more</a>)</span>

  protected void <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html#doGet(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)" class="javadoc">doGet</a>(<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletRequest.html" class="javadoc">HttpServletRequest</a> request, <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html" class="javadoc">HttpServletResponse</a> response)
        throws <a href="http://java.sun.com/javase/6/docs/api/java/io/IOException.html" class="javadoc">IOException</a>, <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletException.html" class="javadoc">ServletException</a> {
    try {
      <a href="http://java.sun.com/javase/6/docs/api/java/sql/Connection.html" class="javadoc">Connection</a> connection = <em>db</em>.<a href="http://java.sun.com/javase/6/docs/api/javax/sql/DataSource.html#getConnection()" class="javadoc">getConnection</a>();  <span class="cmt">// use injected value</span>

      <span class="cmt">// <span class="abstract">do something ...</span></span>

    }
    catch (<a href="http://java.sun.com/javase/6/docs/api/java/sql/SQLException.html" class="javadoc">SQLException</a> e) {
      throw new <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletException.html" class="javadoc">ServletException</a>(e);               <span class="cmt">// simple error handling (<a href="#" id="tl-d22757e5825" class="dottedTooltip" onclick="return tlClick('tl-d22757e5825','pp-d22757e5825');" onmouseover="return tlOver('tl-d22757e5825','pp-d22757e5825');" onmouseout="return tlOut('tl-d22757e5825','pp-d22757e5825');">more</a>)</span>
    }
  }
}
</code></pre></div></div><div class="subSecRow1" id="sec_jndilookup"><div class="subSecHead" id="sechd_jndilookup"><a name="jndilookup">JNDI Lookup</a></div><div class="subSecContent" id="seccnt_jndilookup"><h2 class="subSecSummaryNoClick">How to get resources with JNDI</h2><p class="subSecExplanation">Instead of declaring resources with JNDI, you can also <em>look them up manually using the JNDI API</em>. This was also the only way to get resources in Servlet 2.4 API and earlier.<br/>In order to look up resources, you need to <em>declare them in your <span class="idf">web.xml</span></em> like this:</p><pre class="subSecConfig"><span class="tag">&lt;<a href="#" id="tl-d22757e5870" class="tooltip" onclick="return tlClick('tl-d22757e5870','pp-d22757e656');" onmouseover="return tlOver('tl-d22757e5870','pp-d22757e656');" onmouseout="return tlOut('tl-d22757e5870','pp-d22757e656');">env-entry</a>&gt;</span>
    <span class="tag">&lt;<a href="#" id="tl-d22757e5873" class="tooltip" onclick="return tlClick('tl-d22757e5873','pp-d22757e330');" onmouseover="return tlOver('tl-d22757e5873','pp-d22757e330');" onmouseout="return tlOut('tl-d22757e5873','pp-d22757e330');">description</a>&gt;</span>Name of the webmaster<span class="tag">&lt;/<a href="#" id="tl-d22757e5876" class="tooltip" onclick="return tlClick('tl-d22757e5876','pp-d22757e330');" onmouseover="return tlOver('tl-d22757e5876','pp-d22757e330');" onmouseout="return tlOut('tl-d22757e5876','pp-d22757e330');">description</a>&gt;</span>
    <span class="tag">&lt;<a href="#" id="tl-d22757e5878" class="tooltip" onclick="return tlClick('tl-d22757e5878','pp-d22757e661');" onmouseover="return tlOver('tl-d22757e5878','pp-d22757e661');" onmouseout="return tlOut('tl-d22757e5878','pp-d22757e661');">env-entry-name</a>&gt;</span><em>param/webmaster</em><span class="tag">&lt;/<a href="#" id="tl-d22757e5882" class="tooltip" onclick="return tlClick('tl-d22757e5882','pp-d22757e661');" onmouseover="return tlOver('tl-d22757e5882','pp-d22757e661');" onmouseout="return tlOut('tl-d22757e5882','pp-d22757e661');">env-entry-name</a>&gt;</span>
    <span class="tag">&lt;<a href="#" id="tl-d22757e5884" class="tooltip" onclick="return tlClick('tl-d22757e5884','pp-d22757e666');" onmouseover="return tlOver('tl-d22757e5884','pp-d22757e666');" onmouseout="return tlOut('tl-d22757e5884','pp-d22757e666');">env-entry-type</a>&gt;</span>java.lang.String<span class="tag">&lt;/<a href="#" id="tl-d22757e5888" class="tooltip" onclick="return tlClick('tl-d22757e5888','pp-d22757e666');" onmouseover="return tlOver('tl-d22757e5888','pp-d22757e666');" onmouseout="return tlOut('tl-d22757e5888','pp-d22757e666');">env-entry-type</a>&gt;</span>
<span class="tag">&lt;/<a href="#" id="tl-d22757e5890" class="tooltip" onclick="return tlClick('tl-d22757e5890','pp-d22757e656');" onmouseover="return tlOver('tl-d22757e5890','pp-d22757e656');" onmouseout="return tlOut('tl-d22757e5890','pp-d22757e656');">env-entry</a>&gt;</span>

<span class="tag">&lt;<a href="#" id="tl-d22757e5892" class="tooltip" onclick="return tlClick('tl-d22757e5892','pp-d22757e747');" onmouseover="return tlOver('tl-d22757e5892','pp-d22757e747');" onmouseout="return tlOut('tl-d22757e5892','pp-d22757e747');">resource-ref</a>&gt;</span>
    <span class="tag">&lt;<a href="#" id="tl-d22757e5895" class="tooltip" onclick="return tlClick('tl-d22757e5895','pp-d22757e330');" onmouseover="return tlOver('tl-d22757e5895','pp-d22757e330');" onmouseout="return tlOut('tl-d22757e5895','pp-d22757e330');">description</a>&gt;</span>A DataSource for our database<span class="tag">&lt;/<a href="#" id="tl-d22757e5898" class="tooltip" onclick="return tlClick('tl-d22757e5898','pp-d22757e330');" onmouseover="return tlOver('tl-d22757e5898','pp-d22757e330');" onmouseout="return tlOut('tl-d22757e5898','pp-d22757e330');">description</a>&gt;</span>
    <span class="tag">&lt;<a href="#" id="tl-d22757e5900" class="tooltip" onclick="return tlClick('tl-d22757e5900','pp-d22757e761');" onmouseover="return tlOver('tl-d22757e5900','pp-d22757e761');" onmouseout="return tlOut('tl-d22757e5900','pp-d22757e761');">res-ref-name</a>&gt;</span><em>jdbc/db</em><span class="tag">&lt;/<a href="#" id="tl-d22757e5905" class="tooltip" onclick="return tlClick('tl-d22757e5905','pp-d22757e761');" onmouseover="return tlOver('tl-d22757e5905','pp-d22757e761');" onmouseout="return tlOut('tl-d22757e5905','pp-d22757e761');">res-ref-name</a>&gt;</span>
    <span class="tag">&lt;<a href="#" id="tl-d22757e5907" class="tooltip" onclick="return tlClick('tl-d22757e5907','pp-d22757e766');" onmouseover="return tlOver('tl-d22757e5907','pp-d22757e766');" onmouseout="return tlOut('tl-d22757e5907','pp-d22757e766');">res-type</a>&gt;</span>javax.sql.DataSource<span class="tag">&lt;/<a href="#" id="tl-d22757e5910" class="tooltip" onclick="return tlClick('tl-d22757e5910','pp-d22757e766');" onmouseover="return tlOver('tl-d22757e5910','pp-d22757e766');" onmouseout="return tlOut('tl-d22757e5910','pp-d22757e766');">res-type</a>&gt;</span>
    <span class="tag">&lt;<a href="#" id="tl-d22757e5912" class="tooltip" onclick="return tlClick('tl-d22757e5912','pp-d22757e768');" onmouseover="return tlOver('tl-d22757e5912','pp-d22757e768');" onmouseout="return tlOut('tl-d22757e5912','pp-d22757e768');">res-auth</a>&gt;</span>Container<span class="tag">&lt;/<a href="#" id="tl-d22757e5915" class="tooltip" onclick="return tlClick('tl-d22757e5915','pp-d22757e768');" onmouseover="return tlOver('tl-d22757e5915','pp-d22757e768');" onmouseout="return tlOut('tl-d22757e5915','pp-d22757e768');">res-auth</a>&gt;</span>
<span class="tag">&lt;/<a href="#" id="tl-d22757e5918" class="tooltip" onclick="return tlClick('tl-d22757e5918','pp-d22757e747');" onmouseover="return tlOver('tl-d22757e5918','pp-d22757e747');" onmouseout="return tlOut('tl-d22757e5918','pp-d22757e747');">resource-ref</a>&gt;</span>
</pre><p class="subSecExplanation">As with <a href="http://java.sun.com/javaee/5/docs/api/javax/annotation/Resource.html" class="javadoc">@Resource</a> annotations, the <a href="#" id="tl-d22757e5926" class="dottedTooltip" onclick="return tlClick('tl-d22757e5926','pp-d22757e5633');" onmouseover="return tlOver('tl-d22757e5926','pp-d22757e5633');" onmouseout="return tlOut('tl-d22757e5926','pp-d22757e5633');">deployer</a> must <em>provide values for those resources</em> by configuring a web container (in a container specific way).</p><p class="subSecExplanation">With the resources being declared, you can use JNDI to look them up:</p><pre class="subSecCode"><code>import <a href="http://java.sun.com/javase/6/docs/api/javax/naming/package-summary.html" class="javadoc">javax.naming.*</a>;
import <a href="http://java.sun.com/javase/6/docs/api/javax/sql/package-summary.html" class="javadoc">javax.sql.*</a>;
import <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/package-summary.html" class="javadoc">javax.servlet.http.*</a>;
import <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/package-summary.html" class="javadoc">javax.servlet.*</a>;
import <a href="http://java.sun.com/javase/6/docs/api/java/io/package-summary.html" class="javadoc">java.io.*</a>;

public class JNDIServlet extends <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html" class="javadoc">HttpServlet</a> {

  protected void <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html#doGet(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)" class="javadoc">doGet</a>(<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletRequest.html" class="javadoc">HttpServletRequest</a> request, <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html" class="javadoc">HttpServletResponse</a> response)
        throws <a href="http://java.sun.com/javase/6/docs/api/java/io/IOException.html" class="javadoc">IOException</a>, <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletException.html" class="javadoc">ServletException</a> {
    try {
      <a href="http://java.sun.com/javase/6/docs/api/javax/naming/Context.html" class="javadoc">Context</a> ic = new <a href="http://java.sun.com/javase/6/docs/api/javax/naming/InitialContext.html http://java.sun.com/javase/6/docs/api/javax/naming/InitialContext.html" class="javadoc">InitialContext</a>();
      <a href="http://java.sun.com/javase/6/docs/api/javax/naming/Context.html" class="javadoc">Context</a> ctx = (<a href="http://java.sun.com/javase/6/docs/api/javax/naming/Context.html" class="javadoc">Context</a>) ic.<em><a href="http://java.sun.com/javase/6/docs/api/javax/naming/Context.html#lookup(java.lang.String)" class="javadoc">lookup</a>("java:comp/env")</em>;  <span class="cmt">// enter ENC (<a href="#" id="tl-d22757e6027" class="dottedTooltip" onclick="return tlClick('tl-d22757e6027','pp-d22757e6027');" onmouseover="return tlOver('tl-d22757e6027','pp-d22757e6027');" onmouseout="return tlOut('tl-d22757e6027','pp-d22757e6027');">more</a>)</span>

      String wm = (String) ctx.<em><a href="http://java.sun.com/javase/6/docs/api/javax/naming/Context.html#lookup(java.lang.String)" class="javadoc">lookup</a>("param/webmaster")</em>;  <span class="cmt">// lookup string (<a href="#" id="tl-d22757e6041" class="dottedTooltip" onclick="return tlClick('tl-d22757e6041','pp-d22757e6041');" onmouseover="return tlOver('tl-d22757e6041','pp-d22757e6041');" onmouseout="return tlOut('tl-d22757e6041','pp-d22757e6041');">more</a>)</span>
      <a href="http://java.sun.com/javase/6/docs/api/javax/sql/DataSource.html" class="javadoc">DataSource</a> db = (<a href="http://java.sun.com/javase/6/docs/api/javax/sql/DataSource.html" class="javadoc">DataSource</a>) ctx.<em><a href="http://java.sun.com/javase/6/docs/api/javax/naming/Context.html#lookup(java.lang.String)" class="javadoc">lookup</a>("jdbc/db")</em>;  <span class="cmt">// lookup <a href="http://java.sun.com/javase/6/docs/api/javax/sql/DataSource.html" class="javadoc">DataSource</a> (<a href="#" id="tl-d22757e6065" class="dottedTooltip" onclick="return tlClick('tl-d22757e6065','pp-d22757e6065');" onmouseover="return tlOver('tl-d22757e6065','pp-d22757e6065');" onmouseout="return tlOut('tl-d22757e6065','pp-d22757e6065');">more</a>)</span>

      <span class="cmt">// <span class="abstract">do something ...</span></span>

    }
    catch (<a href="http://java.sun.com/javase/6/docs/api/javax/naming/NamingException.html" class="javadoc">NamingException</a> e) {
      throw new <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletException.html" class="javadoc">ServletException</a>(e);                       <span class="cmt">// simple error handling (<a href="#" id="tl-d22757e6098" class="dottedTooltip" onclick="return tlClick('tl-d22757e6098','pp-d22757e5825');" onmouseover="return tlOver('tl-d22757e6098','pp-d22757e5825');" onmouseout="return tlOut('tl-d22757e6098','pp-d22757e5825');">more</a>)</span>
    }
  }
}
</code></pre></div></div><div class="subSecRow2" id="sec_tomcatresources"><div class="subSecHead" id="sechd_tomcatresources"><a name="tomcatresources">Tomcat</a></div><div class="subSecContent" id="seccnt_tomcatresources"><h2 class="subSecSummaryNoClick">How to Provide Resources in Tomcat</h2><p class="subSecExplanation">In <a href="http://tomcat.apache.org">Tomcat</a>, resources are <em>configured in files called <a href="http://tomcat.apache.org/tomcat-6.0-doc/config/context.html">context.xml</a></em>. Global resources are defined in <span class="idf">$TOMCAT_HOME/conf/context.xml</span>. Web applications can add additional resources by putting a file <span class="idf">/META-INF/context.xml</span> into the WAR.</p><p class="subSecExplanation">The following example <span class="idf">context.xml</span> defines resources for the last two examples. It can be either placed in the WAR's <span class="idf">/META-INF/context.xml</span> or at <span class="idf">$TOMCAT_HOME/conf/context.xml</span>.</p><pre class="subSecConfig">&lt;Context&gt;
  &lt;Environment name="<em>param/webmaster</em>" value="tim@jarfiller.com" type="java.lang.String" 
  		<em>override="false"</em>/&gt; &lt;!-- <em>required for web.xml version</em> (<a href="#" id="tl-d22757e6163" class="dottedTooltip" onclick="return tlClick('tl-d22757e6163','pp-d22757e6163');" onmouseover="return tlOver('tl-d22757e6163','pp-d22757e6163');" onmouseout="return tlOut('tl-d22757e6163','pp-d22757e6163');">more</a>) --&gt;

  &lt;Resource name="<em>jdbc/db</em>" 
               auth="Container" type="javax.sql.DataSource"
               driverClassName="org.apache.derby.jdbc.EmbeddedDriver"
               url="jdbc:derby:c:\tmp\JarfillerDB;create=true"/&gt;
&lt;/Context&gt;
				</pre><p class="subSecExplanation">For more details read Tomcat's <a href="http://tomcat.apache.org/tomcat-6.0-doc/config/context.html">context documentation</a>.</p></div></div><div class="yahbar"><div class="yahprev"><a href="sessionsandcookies.xhtml">Prev<br/><span>Sessions and Cookies</span></a></div><div class="yahhere"><a href="#" onclick="return navToggle();">Servlet 2.5 Guide / Resources</a><br/><a href="/guide/servlet25/"><span>Single Page Mode</span></a>, <a href="#" onclick="return navToggle();"><span>Show Table of Content</span></a></div><div class="yahnext"><a href="customheaders.xhtml">Next<br/><span>How to Read and Write Additional Headers</span></a></div></div></div><div id="sidecolumn">
    	<div><h3>Useful Links</h3><div class="sidecolumnSubTitleLine"/>
	  			<a href="http://java.sun.com/products/servlet/">Servlet Homepage</a><br/>
	  			<a href="http://en.wikipedia.org/wiki/Java_Servlet">Servlet on Wikipedia</a><br/>
	  			<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/package-summary.html">javax.servlet API Docs</a><br/>
	  			<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/package-summary.html">javax.servlet.http API Docs</a><br/>
	  			<a href="http://jcp.org/aboutJava/communityprocess/mrel/jsr154/index2.html">Servlet 2.5 Specification</a><br/>
	  		</div>
  		
  		<div><h3>Related Documents</h3><div class="sidecolumnSubTitleLine">(on Jarfiller.com)</div>
	  			<a href="/reference/webxml2x/">Web.xml Reference</a><br/>
	  		</div>
  	
  </div></div></div><div id="footer"><div id="footer-content"><div id="footer-left"><div class="footerLine"><a href="/">Home</a> - <a href="/about">About Jarfiller</a> - <a href="/imprint.xhtml">Imprint</a></div><div class="footerLine">Please send feedback and corrections to <a href="mailto:tim@tjansen.de">tim@<span style="display: none">got you</span>tjansen.de</a>.</div><div class="footerLine"><a href="http://www.twitter.com/timjansen">Follow</a> me on Twitter.</div><div class="copyrightLine">© 2010 Tim Jansen; content licensed under <a href="http://creativecommons.org/licenses/by/3.0/us/">cc-by</a>; example source code is public domain
				</div></div><div id="footer-right"><a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="../../images/ext/cc-by-88x31.png"/></a></div></div></div><div id="navbar" onclick="return navToggle();" onmouseover="document.getElementById('navbar').className='mouseover';" onmouseout="document.getElementById('navbar').className='';"/><div id="navcontainer"><div id="navlinks"><div id="navclosebar"><a href="#" onclick="return navClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div><div id="navpositionbar" class="navpositionbar"/><h2 id="navtitle">Servlet 2.5 Guide</h2><a id="nav_overview" class="navseclink" href="overview.xhtml#overview">Overview</a><a id="nav_intro" class="navsublink" href="overview.xhtml#intro">Intro</a><a id="nav_usecases" class="navsublink" href="overview.xhtml#usecases">When should you write a Servlet?</a><a id="nav_requirements" class="navsublink" href="overview.xhtml#requirements">What do you need for Servlets?</a><a id="nav_containers" class="navsublink" href="overview.xhtml#containers">Which container supports which Servlet / JEE version?</a><a id="nav_httpintro" class="navsublink" href="overview.xhtml#httpintro">Short HTTP Introduction</a><a id="nav_servlets" class="navseclink" href="servlets.xhtml#servlets">Servlets</a><a id="nav_servletintro" class="navsublink" href="servlets.xhtml#servletintro">Servlet Intro</a><a id="nav_classoverview" class="navsublink" href="servlets.xhtml#classoverview">Class Overview</a><a id="nav_servletclass" class="navsublink" href="servlets.xhtml#servletclass">Servlet Class</a><a id="nav_servicemethods" class="navsublink" href="servlets.xhtml#servicemethods">Service Dispatching in the HttpServlet</a><a id="nav_lifecycle" class="navsublink" href="servlets.xhtml#lifecycle">The Servlet Lifecycle</a><a id="nav_multithreading" class="navsublink" href="servlets.xhtml#multithreading">Multithreading</a><a id="nav_twothreadsafeways" class="navsublink" href="servlets.xhtml#twothreadsafeways">Two Simple Ways to Write Thread-Safe Servlets</a><a id="nav_webapplications" class="navsublink" href="servlets.xhtml#webapplications">Web Applications</a><a id="nav_webxml" class="navsublink" href="servlets.xhtml#webxml">web.xml</a><a id="nav_applayout" class="navsublink" href="servlets.xhtml#applayout">Example Application Layout</a><a id="nav_contextroot" class="navsublink" href="servlets.xhtml#contextroot">Context Root</a><a id="nav_staticcontent" class="navsublink" href="servlets.xhtml#staticcontent">Static Content</a><a id="nav_eclipse" class="navsublink" href="servlets.xhtml#eclipse">How to Create a Web Application with Eclipse</a><a id="nav_ant" class="navsublink" href="servlets.xhtml#ant">How to Create a Web Application (WAR) with Ant</a><a id="nav_tomcat" class="navsublink" href="servlets.xhtml#tomcat">How to Deploy a Web Application on Tomcat</a><a id="nav_responses" class="navseclink" href="responses.xhtml#responses">Responses</a><a id="nav_textoutput" class="navsublink" href="responses.xhtml#textoutput">Text Output</a><a id="nav_responsebinary" class="navsublink" href="responses.xhtml#responsebinary">Binary Output</a><a id="nav_buffering" class="navsublink" href="responses.xhtml#buffering">Buffering and Committing</a><a id="nav_errors" class="navsublink" href="responses.xhtml#errors">Error Code</a><a id="nav_redirection" class="navsublink" href="responses.xhtml#redirection">Redirection</a><a id="nav_requests" class="navseclink" href="requests.xhtml#requests">Requests</a><a id="nav_reqparameters" class="navsublink" href="requests.xhtml#reqparameters">Request Parameters</a><a id="nav_parameternames" class="navsublink" href="requests.xhtml#parameternames">How to find out which parameters have been sent</a><a id="nav_headers" class="navsublink" href="requests.xhtml#headers">How to read header values</a><a id="nav_paths" class="navsublink" href="requests.xhtml#paths">Paths</a><a id="nav_sessionsandcookies" class="navseclink" href="sessionsandcookies.xhtml#sessionsandcookies">Sessions and Cookies</a><a id="nav_cookies" class="navsublink" href="sessionsandcookies.xhtml#cookies">Cookies</a><a id="nav_sessions" class="navsublink" href="sessionsandcookies.xhtml#sessions">Sessions</a><a id="nav_distributablesessions" class="navsublink" href="sessionsandcookies.xhtml#distributablesessions">Sessions in Distributed Servers (Clusters)</a><a id="nav_sessioncaveat" class="navsublink" href="sessionsandcookies.xhtml#sessioncaveat">Be Careful When Using HttpSession</a><a id="nav_resources" class="navseclink" href="#resources" onclick="if (event.button == 0) return goTo('#resources', true); else return true;">Resources</a><a id="nav_resourceannotations" class="navsublink" href="#resourceannotations" onclick="if (event.button == 0) return goTo('#resourceannotations', true); else return true;">Resource Annotations</a><a id="nav_jndilookup" class="navsublink" href="#jndilookup" onclick="if (event.button == 0) return goTo('#jndilookup', true); else return true;">How to get resources with JNDI</a><a id="nav_tomcatresources" class="navsublink" href="#tomcatresources" onclick="if (event.button == 0) return goTo('#tomcatresources', true); else return true;">How to Provide Resources in Tomcat</a><span class="navseclink">How to... Requests and Responses</span><a id="nav_customheaders" class="navsublink" href="customheaders.xhtml#customheaders">How to Read and Write Additional Headers</a><a id="nav_attributes" class="navsublink" href="attributes.xhtml#attributes">How to Use Attributes in Request and Context</a><a id="nav_getlastmodified" class="navsublink" href="getlastmodified.xhtml#getlastmodified">How to Use HttpServlet.getLastModified to Improve Client-Side Caching</a><a id="nav_contentlength" class="navsublink" href="contentlength.xhtml#contentlength">How to Set the Content Length</a><a id="nav_fileupload" class="navsublink" href="fileupload.xhtml#fileupload">How to Receive File Uploads (Multi-Part File Upload)</a><a id="nav_browserdetection" class="navsublink" href="browserdetection.xhtml#browserdetection">How to Detect the User's Web Browser</a><a id="nav_contentlanguage" class="navsublink" href="contentlanguage.xhtml#contentlanguage">How to Declare the Content Language</a><a id="nav_acceptedlanguages" class="navsublink" href="acceptedlanguages.xhtml#acceptedlanguages">How to Detect the Client's Preferred Languages</a><a id="nav_sendingxml" class="navsublink" href="sendingxml.xhtml#sendingxml">How to Send XML as Response</a><a id="nav_dynamicimages" class="navsublink" href="dynamicimages.xhtml#dynamicimages">How to Generate Images as Response</a><a id="nav_jspforward" class="navsublink" href="jspforward.xhtml#jspforward">How to Use a JSP as Template</a><a id="nav_requestdispatcher" class="navsublink" href="requestdispatcher.xhtml#requestdispatcher">How to Invoke Servlets and JSPs with the RequestDispatcher</a><a id="nav_virtualhosts" class="navsublink" href="virtualhosts.xhtml#virtualhosts">How to Handle Virtual Hosts and Multiple IP Addresses?</a><a id="nav_filters" class="navsublink" href="filters.xhtml#filters">How to Write Filters</a><span class="navseclink">How to... Sessions and Security</span><a id="nav_usermanagement" class="navsublink" href="usermanagement.xhtml#usermanagement">How to Authenticate and Manage Users</a><a id="nav_declarativesecurity" class="navsublink" href="declarativesecurity.xhtml#declarativesecurity">How to Restrict Access to a Web Application (Declarative Security)</a><a id="nav_requiringssl" class="navsublink" href="requiringssl.xhtml#requiringssl">How to Require HTTPS / SSL</a><a id="nav_programmaticsecurity" class="navsublink" href="programmaticsecurity.xhtml#programmaticsecurity">How to Use Authentication Data in Servlets</a><a id="nav_cookielessessions" class="navsublink" href="cookielessessions.xhtml#cookielessessions">How to Use HttpSessions and Authentication without Cookies?</a><span class="navseclink">How to... General</span><a id="nav_addinglibraries" class="navsublink" href="addinglibraries.xhtml#addinglibraries">How to Add Libraries to a Web Application / WAR</a><a id="nav_addingresourcefiles" class="navsublink" href="addingresourcefiles.xhtml#addingresourcefiles">How to Read Files Contained in a Web Application / WAR</a><a id="nav_throwingexceptions" class="navsublink" href="throwingexceptions.xhtml#throwingexceptions">How to Throw Exceptions in Servlets</a><a id="nav_initparameters" class="navsublink" href="initparameters.xhtml#initparameters">Configure your Servlet with Initialization Parameters</a><a id="nav_logging" class="navsublink" href="logging.xhtml#logging">How to Log</a><a id="nav_errorpages" class="navsublink" href="errorpages.xhtml#errorpages">How to Replace the Default Error Page</a><a id="nav_temporarydirectory" class="navsublink" href="temporarydirectory.xhtml#temporarydirectory">How to Get a Temporary Directory</a><a id="nav_ejbinvocation" class="navsublink" href="ejbinvocation.xhtml#ejbinvocation">How to Access an EJB</a><a id="nav_distributedapps" class="navsublink" href="distributedapps.xhtml#distributedapps">How to Create a Distributed Application</a><a id="nav_listeners" class="navsublink" href="listeners.xhtml#listeners">How to Be Notified about Events (Listeners)</a><a id="nav_servlet24" class="navsublink" href="servlet24.xhtml#servlet24">New Features Since Servlet API 2.4</a><a id="nav_andnow" class="navseclink" href="andnow.xhtml#andnow">And now...?</a><a id="nav_nextsteps" class="navsublink" href="andnow.xhtml#nextsteps">Next Steps</a></div></div><div id="popups"><div id="pp-d22757e5719" class="tooltip"><span class="idf">@Resource</span> tells the container that the servlet <em>requires a JDBC <span class="idf">DataSource</span> with the JNDI name 'jdbc/db'</em>. The deployer is responsible for configuring the container to provide it. The container will <em>inject the value</em> into the field after instantiation.</div><div id="pp-d22757e5746" class="tooltip"><span class="idf">@Resource</span> tells the container that the servlet <em>requires a String with the JNDI name 'param/webmaster'</em>. The deployer is responsible for configuring the container to provide it. The container will <em>inject the value</em> into the field after instantiation.</div><div id="pp-d22757e5825" class="tooltip">The easiest way to handle an unexpected problem is to throw a <span class="idf">ServletException</span>. The server will return an error page with HTTP status code 500 (internal error).</div><div id="pp-d22757e6027" class="tooltip">All resources that the container provides to the application are always contained in the application's private namespace 'java:comp/env'. Also called Environment Naming Content (ENC).</div><div id="pp-d22757e6041" class="tooltip">Looks up the JNDI name 'java:comp/env/param/webmaster'. 'param/webmaster' is the name specified in <span class="idf">web.xml</span>.</div><div id="pp-d22757e6065" class="tooltip">Looks up the JNDI name 'java:comp/env/jdbc/db'. 'jdbc/db' is the name specified in <span class="idf">web.xml</span>.</div><div id="pp-d22757e6163" class="tooltip">For whatever reason, in Tomcat 'override' means overriding the (optional) default value given in <span class="idf">web.xml</span>'s <span class="tag">&lt;<a href="#" id="tl-d22757e6168" class="tooltip" onclick="return tlClick('tl-d22757e6168','pp-d22757e656');" onmouseover="return tlOver('tl-d22757e6168','pp-d22757e656');" onmouseout="return tlOut('tl-d22757e6168','pp-d22757e656');">env-entry</a>&gt;</span> element. So <em>to use the value in <span class="idf">context.xml</span> you must set the attribute to "false"</em>.<br/> If the application is declaring the value with <span class="idf">@Resource</span>, the <span class="idf">override is not needed.</span></div><div id="pp-d22757e5633" class="tooltip">The person installing the application on the server.</div><div id="pp-d22757e330" class="tooltip">A description of the surrounding element which may be shown by a tool. Can be repeated with different <span class="idf">xml-lang</span> attributes in order to provide descriptions in several languages. Optional.</div><div id="pp-d22757e656" class="tooltip">Declares that the application requires an environment entry with the given name. Environment entries are used for configuration and must be provided by the deployer. The application can find the entry in the JNDI context, relative to <span class="idf">java:comp/env/</span>. Optional, more than one allowed.</div><div id="pp-d22757e661" class="tooltip">The name of the entry in the JNDI namespace, relative to <span class="idf">java:comp/env/</span>. This is the name the application uses to look up the entry. It is recommended for environment entries that their name starts with "param/". Required.</div><div id="pp-d22757e666" class="tooltip">The Java type of the entry as fully qualified class name. Supported are at least <span class="idf">java.lang.String</span>, <span class="idf">java.lang.Character</span>, <span class="idf">java.lang.Boolean</span>, <span class="idf">java.lang.Integer</span>, <span class="idf">java.lang.Long</span>, <span class="idf">java.lang.Float</span> or <span class="idf">java.lang.Double</span>. Required.</div><div id="pp-d22757e747" class="tooltip">Declares that the application needs a reference to some kind of <em>connection factory</em> that allows you to obtain connections. Typically this is used for JDBC <span class="idf">DataSource</span> (for database access), JMS <span class="idf">ConnectionFactory</span> (for messaging) or JavaMail <span class="idf">Session</span> objects. The reference will be put into the application's JNDI namespace. Optional, more than one allowed.</div><div id="pp-d22757e761" class="tooltip">The name under which the factory will be put into the application's JNDI environment, relative to <span class="idf">java:comp/env/</span>. Required.</div><div id="pp-d22757e766" class="tooltip">The fully-qualified class name of the connection factory. Required.</div><div id="pp-d22757e768" class="tooltip">Either <span class="idf">Container</span>, if the container is responsible for authentication, or <span class="idf">Application</span>, if the application will authenticate itself. Required.</div><div id="ttCloseBar" class="closeBar"><a href="#" onclick="return tlClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div><div id="topicCloseBar" class="closeBar"><a href="#" onclick="return tpcClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div></div></body></html>