<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:page="http://tjansen.de/refPage" xmlns:i="http://tjansen.de/internal"><head><title>How to use Message Headers - JMS Guide</title><meta http-equiv="X-UA-Compatible" content="chrome=1"/><meta http-equiv="content-language" content="en"/><link rel="shortcut icon" href="../../images/favicon.png" type="image/png"/><link rel="stylesheet" type="text/css" href="../../style/style.css"/><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-6791190-2']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
})();
</script><script type="text/javascript" src="../../js/all.js"/></head><body id="body"><div id="visibleContent"><div id="top"><a href="/"><img src="../../images/titlebar.png" alt="Jarfiller.com"/></a></div><div id="main"><div id="bodycolumn"><div class="yahbar"><div class="yahprev"><a href="messagetypes.xhtml">Prev</a></div><h3 class="yahhere"><a href="#" onclick="return navToggle();">JMS Guide / How to...</a></h3><div class="yahnext"><a href="messageproperties.xhtml">Next</a></div></div><h1 id="sec_howto" class="multipageTitle">How to use Message Headers</h1><div class="subSecRow2" id="sec_messageheaders"><div class="subSecHead" id="sechd_messageheaders"><a name="messageheaders">Message Headers</a></div><div class="subSecContent" id="seccnt_messageheaders"><p class="subSecExplanation">Beside their payload, JMS <a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html" class="javadoc">Message</a>s also have a number of <em>header fields</em> for the message receiver. Some of them have be set by the message sender, while others are set by the JMS provider (they will be ignored if the sender sets those).</p><div class="subSecTableDiv"><table><tr><th>Field Name</th><th>Set by..</th><th>Always set?</th><th>Description</th></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSDestination()" class="javadoc">JMSDestination</a></td><td>JMS</td><td>yes</td><td>Name of the <a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Destination.html" class="javadoc">Destination</a> the message was sent to</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSDeliveryMode()" class="javadoc">JMSDeliveryMode</a></td><td>JMS</td><td>yes</td><td>Defines <a href="http://java.sun.com/javaee/5/docs/api/javax/jms/DeliveryMode.html" class="javadoc">DeliveryMode</a> (<a href="#" id="tl-d18684e2593" class="dottedTooltip" onclick="return tlClick('tl-d18684e2593','pp-d18684e2593');" onmouseover="return tlOver('tl-d18684e2593','pp-d18684e2593');" onmouseout="return tlOut('tl-d18684e2593','pp-d18684e2593');">more</a>)</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSMessageID()" class="javadoc">JMSMessageID</a></td><td>JMS</td><td>yes</td><td>Unique message id (<a href="#" id="tl-d18684e2623" class="dottedTooltip" onclick="return tlClick('tl-d18684e2623','pp-d18684e2623');" onmouseover="return tlOver('tl-d18684e2623','pp-d18684e2623');" onmouseout="return tlOut('tl-d18684e2623','pp-d18684e2623');">more</a>)</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSTimestamp()" class="javadoc">JMSTimestamp</a></td><td>JMS</td><td>yes</td><td>Time when message was sent by client</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSCorrelationID()" class="javadoc">JMSCorrelationID</a></td><td>Sender</td><td>no</td><td>Link from response message to request (<a href="#" id="tl-d18684e2658" class="dottedTooltip" onclick="return tlClick('tl-d18684e2658','pp-d18684e2658');" onmouseover="return tlOver('tl-d18684e2658','pp-d18684e2658');" onmouseout="return tlOut('tl-d18684e2658','pp-d18684e2658');">more</a>)</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSReplyTo()" class="javadoc">JMSReplyTo</a></td><td>Sender</td><td>no</td><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Destination.html" class="javadoc">Destination</a> to reply to (<a href="#" id="tl-d18684e2686" class="dottedTooltip" onclick="return tlClick('tl-d18684e2686','pp-d18684e2686');" onmouseover="return tlOver('tl-d18684e2686','pp-d18684e2686');" onmouseout="return tlOut('tl-d18684e2686','pp-d18684e2686');">more</a>)</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSRedelivered()" class="javadoc">JMSRedelivered</a></td><td>JMS</td><td>yes</td><td>Signals that this message was already sent before (<a href="#" id="tl-d18684e2707" class="dottedTooltip" onclick="return tlClick('tl-d18684e2707','pp-d18684e2707');" onmouseover="return tlOver('tl-d18684e2707','pp-d18684e2707');" onmouseout="return tlOut('tl-d18684e2707','pp-d18684e2707');">more</a>)</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSType()" class="javadoc">JMSType</a></td><td>Sender</td><td>no</td><td>Describes the type of message (<a href="#" id="tl-d18684e2728" class="dottedTooltip" onclick="return tlClick('tl-d18684e2728','pp-d18684e2728');" onmouseover="return tlOver('tl-d18684e2728','pp-d18684e2728');" onmouseout="return tlOut('tl-d18684e2728','pp-d18684e2728');">more</a>)</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSExpiration()" class="javadoc">JMSExpiration</a></td><td>JMS</td><td>no</td><td>Time at which message expires (<a href="#" id="tl-d18684e2746" class="dottedTooltip" onclick="return tlClick('tl-d18684e2746','pp-d18684e2746');" onmouseover="return tlOver('tl-d18684e2746','pp-d18684e2746');" onmouseout="return tlOut('tl-d18684e2746','pp-d18684e2746');">more</a>)</td></tr><tr><td><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html#getJMSPriority()" class="javadoc">JMSPriority</a></td><td>JMS</td><td>no</td><td>Priority 0 (lowest) - 9 (highest) (<a href="#" id="tl-d18684e2770" class="dottedTooltip" onclick="return tlClick('tl-d18684e2770','pp-d18684e2770');" onmouseover="return tlOver('tl-d18684e2770','pp-d18684e2770');" onmouseout="return tlOut('tl-d18684e2770','pp-d18684e2770');">more</a>)</td></tr></table></div><p class="subSecExplanation">There are simple getters and setters for all header fields: </p><pre class="subSecCode"><code><a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html" class="javadoc">Message</a> msg = <span class="abstract">...</span>

<span class="cmt">// Setting a header:</span>
msg.<a href="http://java.sun.com/javaee/5/docs/apijavax/jms/Message.html#setJMSPriority(int)" class="javadoc"><em>setJMSPriority</em></a>(9);

<span class="cmt">// Reading a header:</span>
String msgId = msg.<a href="http://java.sun.com/javaee/5/docs/apijavax/jms/Message.html#getJMSMessageID()" class="javadoc"><em>getJMSMessageID</em></a>();
</code></pre></div></div><div class="yahbar"><div class="yahprev"><a href="messagetypes.xhtml">Prev<br/><span>Message Types</span></a></div><div class="yahhere"><a href="#" onclick="return navToggle();">JMS Guide / How to...</a><br/><a href="/guide/jms/"><span>Single Page Mode</span></a>, <a href="#" onclick="return navToggle();"><span>Show Table of Content</span></a></div><div class="yahnext"><a href="messageproperties.xhtml">Next<br/><span>How to read and set Message Properties</span></a></div></div></div><div id="sidecolumn">
    	<div><h3>Useful Links</h3><div class="sidecolumnSubTitleLine"/>
  			<a href="http://java.sun.com/products/jms/">JMS Homepage</a><br/>
  			<a href="http://en.wikipedia.org/wiki/Java_Message_Service">JMS on Wikipedia</a><br/>
  			<a href="http://java.sun.com/javaee/5/docs/api/javax/jms/package-summary.html">javax.jms API Docs</a><br/>
  			<a href="http://java.sun.com/products/jms/docs.html">JMS Specification</a><br/>
  		</div>
  </div></div></div><div id="footer"><div id="footer-content"><div id="footer-left"><div class="footerLine"><a href="/">Home</a> - <a href="/about">About Jarfiller</a> - <a href="/imprint.xhtml">Imprint</a></div><div class="footerLine">Please send feedback and corrections to <a href="mailto:tim@tjansen.de">tim@<span style="display: none">got you</span>tjansen.de</a>.</div><div class="footerLine"><a href="http://www.twitter.com/timjansen">Follow</a> me on Twitter.</div><div class="copyrightLine">Â© 2010 Tim Jansen; content licensed under <a href="http://creativecommons.org/licenses/by/3.0/us/">cc-by</a>; example source code is public domain
				</div></div><div id="footer-right"><a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="../../images/ext/cc-by-88x31.png"/></a></div></div></div><div id="navbar" onclick="return navToggle();" onmouseover="document.getElementById('navbar').className='mouseover';" onmouseout="document.getElementById('navbar').className='';"/><div id="navcontainer"><div id="navlinks"><div id="navclosebar"><a href="#" onclick="return navClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div><div id="navpositionbar" class="navpositionbar"/><h2 id="navtitle">JMS Guide</h2><a id="nav_jmsoverview" class="navseclink" href="jmsoverview.xhtml#jmsoverview">Overview</a><a id="nav_intro" class="navsublink" href="jmsoverview.xhtml#intro">Intro</a><a id="nav_usecases" class="navsublink" href="jmsoverview.xhtml#usecases">When should JMS be used?</a><a id="nav_requirements" class="navsublink" href="jmsoverview.xhtml#requirements">What do you need for JMS?</a><a id="nav_destinations" class="navsublink" href="jmsoverview.xhtml#destinations">Destinations</a><a id="nav_standaloneclient" class="navseclink" href="standaloneclient.xhtml#standaloneclient">Sending and Receiving Messages (Standalone Client)</a><a id="nav_sending" class="navsublink" href="standaloneclient.xhtml#sending">Sending a message</a><a id="nav_polling" class="navsublink" href="standaloneclient.xhtml#polling">Polling for messages</a><a id="nav_messagelistener" class="navsublink" href="standaloneclient.xhtml#messagelistener">Using a MessageListener</a><a id="nav_jndi" class="navsublink" href="standaloneclient.xhtml#jndi">Getting the ConnectionFactory via JNDI</a><a id="nav_activemqsetup" class="navsublink" href="standaloneclient.xhtml#activemqsetup">How to set up ActiveMQ</a><a id="nav_webspheremqsetup" class="navsublink" href="standaloneclient.xhtml#webspheremqsetup">How to set up Websphere MQ</a><a id="nav_sendingreceivingejb3" class="navseclink" href="sendingreceivingejb3.xhtml#sendingreceivingejb3">Sending and Receiving Messages in EJB 3 Applications</a><a id="nav_sendingejb3" class="navsublink" href="sendingreceivingejb3.xhtml#sendingejb3">Sending Messages</a><a id="nav_receivingejb3" class="navsublink" href="sendingreceivingejb3.xhtml#receivingejb3">Receiving messages</a><a id="nav_jbosssetup" class="navsublink" href="sendingreceivingejb3.xhtml#jbosssetup">How to set up JBoss 5.x</a><a id="nav_topics" class="navseclink" href="topics.xhtml#topics">Using Topics</a><a id="nav_sendingtopics" class="navsublink" href="topics.xhtml#sendingtopics">Sending Topic Messages</a><a id="nav_receivingtopics" class="navsublink" href="topics.xhtml#receivingtopics">Receiving Topic Messages</a><a id="nav_durablesubscription" class="navsublink" href="topics.xhtml#durablesubscription">Durable Subscription</a><a id="nav_endingsubscription" class="navsublink" href="topics.xhtml#endingsubscription">Cancelling a subscription</a><a id="nav_messagetypes" class="navseclink" href="messagetypes.xhtml#messagetypes">Message Types</a><a id="nav_textmessages" class="navsublink" href="messagetypes.xhtml#textmessages">TextMessage</a><a id="nav_mapmessages" class="navsublink" href="messagetypes.xhtml#mapmessages">MapMessage</a><a id="nav_streammessages" class="navsublink" href="messagetypes.xhtml#streammessages">StreamMessage</a><a id="nav_objectmessages" class="navsublink" href="messagetypes.xhtml#objectmessages">ObjectMessage</a><a id="nav_bytesmessages" class="navsublink" href="messagetypes.xhtml#bytesmessages">BytesMessage</a><a id="nav_emptymessages" class="navsublink" href="messagetypes.xhtml#emptymessages">Empty Messages</a><span class="navseclink">How to...</span><a id="nav_messageheaders" class="navsublink" href="messageheaders.xhtml#messageheaders">How to use Message Headers</a><a id="nav_messageproperties" class="navsublink" href="messageproperties.xhtml#messageproperties">How to read and set Message Properties</a><a id="nav_selectors" class="navsublink" href="selectors.xhtml#selectors">How to use Message Selectors to filter messages</a><a id="nav_xml" class="navsublink" href="xml.xhtml#xml">How to send and receive XML messages with DOM or JAXB</a><a id="nav_achknowledgement" class="navsublink" href="achknowledgement.xhtml#achknowledgement">How to control acknowledgement</a><a id="nav_browsing" class="navsublink" href="browsing.xhtml#browsing">How to browse the messages in a queue</a><a id="nav_authentication" class="navsublink" href="authentication.xhtml#authentication">How to authenticate a connection</a><a id="nav_temporaryqueues" class="navsublink" href="temporaryqueues.xhtml#temporaryqueues">How to Create Temporary Queues or Topics</a><a id="nav_requestresponse" class="navsublink" href="requestresponse.xhtml#requestresponse">How to send a response to a message (Request/Reply)</a><a id="nav_deliveryoptions" class="navsublink" href="deliveryoptions.xhtml#deliveryoptions">How to Control Message Delivery (Delivery Mode, Time-to-live and Priority)</a><a id="nav_activationproperties" class="navsublink" href="activationproperties.xhtml#activationproperties">How to Configure a Message-Driven Bean (Activation Properties, Durable Subscriptions)</a><a id="nav_concurrency" class="navsublink" href="concurrency.xhtml#concurrency">How to use JMS in multi-threaded applications</a><a id="nav_classes10" class="navsublink" href="classes10.xhtml#classes10">How to Use QueueConnectionFactory, QueueConnection, QueueSession...</a><a id="nav_andnow" class="navseclink" href="andnow.xhtml#andnow">And now...?</a><a id="nav_nextsteps" class="navsublink" href="andnow.xhtml#nextsteps">Next Steps</a></div></div><div id="popups"><div id="pp-d18684e2593" class="tooltip">The delivery mode can be either <span class="idf">PERSISTENT</span> or <span class="idf">NON_PERSISTENT</span>. In the latter case, the JMS provider may not store the message and it may be lost e.g. if the provider crashed or is restarted. The delivery mode can be configured as parameter to <span class="idf">MessageProducer</span>'s <span class="idf">send</span> method. Some JMS implementations also allow setting a defaults.</div><div id="pp-d18684e2623" class="tooltip">The message ID is a provider-generated string that allows you to identify the message. It will always start with "ID:".</div><div id="pp-d18684e2658" class="tooltip">The JMSCorrelationID is a string set by the message sender which is typically used for responses to a request message. It should allow you to identify the request message that caused the response. By convention, it should contain the JMSMessageID of the request. However, the sender is allowed to put any other string here. <br/>Please note that the <span class="idf">Message</span> interface also provides a method <span class="idf">setJMSCorrelationIDAsBytes</span> which allows you to set a byte array instead of a string. </div><div id="pp-d18684e2686" class="tooltip">The sender of a request message can use this header field to specify which <span class="idf">Destination</span> the recipient should sent its reply to. JMS only transmits this field, but does not do anything with it (thus the recipient is free to ignore it).</div><div id="pp-d18684e2707" class="tooltip">If this header is set to <span class="idf">true</span>, JMS re-sends a message that may have been sent before, but for some reason the delivery has to be repeated. A likely reason for this is that the client did not acknowledge the message.</div><div id="pp-d18684e2728" class="tooltip">This field allows the sender to specify a definition of the message format for the receiver and the JMS provider. For regular providers this is never needed, but some JMS implementations may use of this feature.</div><div id="pp-d18684e2746" class="tooltip">If not 0, specifies the time at which the message expires. The expiration date can be indirectly set by specifying a time-to-live value in <span class="idf">MessageProducer</span>'s <span class="idf">send</span> method. Note that you actually may receive expired messages, JMS does not guarantee that they won't be delivered.</div><div id="pp-d18684e2770" class="tooltip">When messages have different priorities, the JMS provider should try to deliver messages with higher priority first. However, the JMS standard does not require that all implementations actually do this.</div><div id="ttCloseBar" class="closeBar"><a href="#" onclick="return tlClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div><div id="topicCloseBar" class="closeBar"><a href="#" onclick="return tpcClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div></div></body></html>