<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:page="http://tjansen.de/refPage" xmlns:i="http://tjansen.de/internal"><head><title>Responses - Servlet 2.5 Guide</title><meta http-equiv="X-UA-Compatible" content="chrome=1"/><meta http-equiv="content-language" content="en"/><link rel="shortcut icon" href="../../images/favicon.png" type="image/png"/><link rel="stylesheet" type="text/css" href="../../style/style.css"/><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-6791190-2']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
})();
</script><script type="text/javascript" src="../../js/all.js"/></head><body id="body"><div id="visibleContent"><div id="top"><a href="/"><img src="../../images/titlebar.png" alt="Jarfiller.com"/></a></div><div id="main"><div id="bodycolumn"><div class="yahbar"><div class="yahprev"><a href="servlets.xhtml">Prev</a></div><h3 class="yahhere"><a href="#" onclick="return navToggle();">Servlet 2.5 Guide / Responses</a></h3><div class="yahnext"><a href="requests.xhtml">Next</a></div></div><h1 id="sec_responses" class="multipageTitle"><a name="responses">Responses</a></h1><div class="subSecRow1" id="sec_textoutput"><div class="subSecHead" id="sechd_textoutput"><a name="textoutput">Text Output</a><br/>(<a href="#" id="tl-d22757e3483" class="dottedTooltip" onclick="return tlClick('tl-d22757e3483','pp-d22757e3488');" onmouseover="return tlOver('tl-d22757e3483','pp-d22757e3488');" onmouseout="return tlOut('tl-d22757e3483','pp-d22757e3488');">more</a>)
		</div><div class="subSecContent" id="seccnt_textoutput"><pre class="subSecCode"><code>import <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/package-summary.html" class="javadoc">javax.servlet.http.*</a>;
import <a href="http://java.sun.com/javase/6/docs/api/java/io/package-summary.html" class="javadoc">java.io.*</a>;

<span class="cmt">// Servlets that shows the current time</span>
public class TimeServlet extends <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html" class="javadoc">HttpServlet</a> {

  protected void <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html#doGet(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)" class="javadoc">doGet</a>(<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletRequest.html" class="javadoc">HttpServletRequest</a> request, <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html" class="javadoc">HttpServletResponse</a> response)
      throws <a href="http://java.sun.com/javase/6/docs/api/java/io/IOException.html" class="javadoc">IOException</a> {

    response.<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletResponse.html#setContentType(java.lang.String)" class="javadoc"><em>setContentType</em></a>("text/html; charset=UTF-8");  <span class="cmt">// <em>required</em>: HTML in UTF-8 (<a href="#" id="tl-d22757e3574" class="dottedTooltip" onclick="return tlClick('tl-d22757e3574','pp-d22757e3574');" onmouseover="return tlOver('tl-d22757e3574','pp-d22757e3574');" onmouseout="return tlOut('tl-d22757e3574','pp-d22757e3574');">more</a>)</span>
    response.<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletResponse.html#setCharacterEncoding(java.lang.String)" class="javadoc"><em>setCharacterEncoding</em></a>("UTF-8");               <span class="cmt">// recommended: use UTF-8 (<a href="#" id="tl-d22757e3608" class="dottedTooltip" onclick="return tlClick('tl-d22757e3608','pp-d22757e3608');" onmouseover="return tlOver('tl-d22757e3608','pp-d22757e3608');" onmouseout="return tlOut('tl-d22757e3608','pp-d22757e3608');">more</a>)</span>

    <a href="http://java.sun.com/javase/6/docs/api/java/io/PrintWriter.html" class="javadoc">PrintWriter</a> writer = response.<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletResponse.html#getWriter()" class="javadoc"><em>getWriter</em></a>();            <span class="cmt">// writer for sending text (<a href="#" id="tl-d22757e3625" class="dottedTooltip" onclick="return tlClick('tl-d22757e3625','pp-d22757e3625');" onmouseover="return tlOver('tl-d22757e3625','pp-d22757e3625');" onmouseout="return tlOut('tl-d22757e3625','pp-d22757e3625');">more</a>)</span>
    writer.<a href="http://java.sun.com/javase/6/docs/api/java/io/PrintWriter.html#print(java.lang.String)" class="javadoc">print</a>("&lt;html&gt;&lt;head&gt;&lt;title&gt;Time&lt;/title&gt;&lt;/head&gt;&lt;body&gt;");
    writer.<a href="http://java.sun.com/javase/6/docs/api/java/io/PrintWriter.html#print(java.lang.String)" class="javadoc">print</a>("The current time is: ");
    writer.<a href="http://java.sun.com/javase/6/docs/api/java/io/PrintWriter.html#print(java.lang.String)" class="javadoc">print</a>((new java.util.Date()).toString());
    writer.<a href="http://java.sun.com/javase/6/docs/api/java/io/PrintWriter.html#print(java.lang.String)" class="javadoc">print</a>("&lt;/body&gt;&lt;/html&gt;");
  }
}
</code></pre></div></div><div class="subSecRow2" id="sec_responsebinary"><div class="subSecHead" id="sechd_responsebinary"><a name="responsebinary">Binary Output</a><br/>(<a href="#" id="tl-d22757e3682" class="dottedTooltip" onclick="return tlClick('tl-d22757e3682','pp-d22757e3687');" onmouseover="return tlOver('tl-d22757e3682','pp-d22757e3687');" onmouseout="return tlOut('tl-d22757e3682','pp-d22757e3687');">more</a>)
		</div><div class="subSecContent" id="seccnt_responsebinary"><pre class="subSecCode"><code>import <a href="http://java.sun.com/javase/6/docs/api/java/io/package-summary.html" class="javadoc">java.io.*</a>;
import <a href="http://java.sun.com/javase/6/docs/api/java/util/package-summary.html" class="javadoc">java.util.*</a>;
import <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/package-summary.html" class="javadoc">javax.servlet.http.*</a>;

<span class="cmt">// Servlet that sends one of two PNG images, depending on time of day</span>
public class AmPmFileServlet extends <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html" class="javadoc">HttpServlet</a> {

  <span class="cmt">// simple helper: copy data from InputStream to OutputStream</span>
  private void copy(<a href="http://java.sun.com/javase/6/docs/api/java/io/InputStream.html" class="javadoc">InputStream</a> in, <a href="http://java.sun.com/javase/6/docs/api/java/io/OutputStream.html" class="javadoc">OutputStream</a> out) 
      throws <a href="http://java.sun.com/javase/6/docs/api/java/io/IOException.html" class="javadoc">IOException</a> {
    byte buffer[] = new byte[4096];
    while (true) {
      int r = in.<a href="http://java.sun.com/javase/6/docs/api/java/io/InputStream.html#read(byte[])" class="javadoc">read</a>(buffer);
      if (r &lt; 0)                                    <span class="cmt">// end of stream?</span>
        break;
      out.<a href="http://java.sun.com/javase/6/docs/api/java/io/OutputStream.html#write(byte[], int, int)" class="javadoc">write</a>(buffer, 0, r);
    }
  }

  protected void <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html#doGet(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)" class="javadoc">doGet</a>(<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletRequest.html" class="javadoc">HttpServletRequest</a> request, <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html" class="javadoc">HttpServletResponse</a> response)
      throws <a href="http://java.sun.com/javase/6/docs/api/java/io/IOException.html" class="javadoc">IOException</a> {

    <span class="cmt">// before or after noon? determine path to the right image in the WAR</span>
    boolean isPM = new <a href="http://java.sun.com/javase/6/docs/api/java/util/GregorianCalendar.html" class="javadoc">GregorianCalendar</a>().get(<a href="http://java.sun.com/javase/6/docs/api/java/util/Calendar.html#AM_PM" class="javadoc">Calendar.AM_PM</a>) == <a href="http://java.sun.com/javase/6/docs/api/java/util/Calendar.html#PM" class="javadoc">Calendar.PM</a>; 
    String resName = "/WEB-INF/images/time" + (isPM ? "PM" : "AM") + ".png";

    response.<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletResponse.html#setContentType(java.lang.String)" class="javadoc"><em>setContentType</em></a>("image/png");           <span class="cmt">// required: content type PNG</span>
    <a href="http://java.sun.com/javase/6/docs/api/java/io/OutputStream.html" class="javadoc">OutputStream</a> out = response.<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletResponse.html#getOutputStream()" class="javadoc"><em>getOutputStream</em></a>();  <span class="cmt">// stream for binary files (<a href="#" id="tl-d22757e3865" class="dottedTooltip" onclick="return tlClick('tl-d22757e3865','pp-d22757e3625');" onmouseover="return tlOver('tl-d22757e3865','pp-d22757e3625');" onmouseout="return tlOut('tl-d22757e3865','pp-d22757e3625');">more</a>)</span>
    <a href="http://java.sun.com/javase/6/docs/api/java/io/InputStream.html" class="javadoc">InputStream</a> in = <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/GenericServlet.html#getServletContext()" class="javadoc">getServletContext</a>().<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletContext.html#getResourceAsStream(java.lang.String)" class="javadoc">getResourceAsStream</a>(resName);
    <em>copy</em>(in, out);                                  <span class="cmt">// copy file to client</span>
  }
}
</code></pre></div></div><div class="subSecRow1" id="sec_buffering"><div class="subSecHead" id="sechd_buffering"><a name="buffering">Buffering</a></div><div class="subSecContent" id="seccnt_buffering"><h2 class="subSecSummaryNoClick">Buffering and Committing</h2><p class="subSecExplanation">As long as you <em>set the Content Type and other headers before writing the actual data</em>, your servlet will always work fine. However, the Servlet API allows you a bit more flexibility when you understand its <em>buffering mechanism</em>: </p><ul class="subSecList"><li>The web container <em>buffers all data</em> that you write to the client</li><li><em>Data will be sent to the client when ...</em> <ul><li>the buffer's capacity is exceeded, or</li><li>you call <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/flushBuffer.html" class="javadoc">flushBuffer</a>, or</li><li>the amount of bytes specified with <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/setContentLength.html" class="javadoc">setContentLength</a> has been written, or</li><li>the <a href="http://java.sun.com/javase/6/docs/api/java/io/OutputStream.html" class="javadoc">OutputStream</a> or <a href="http://java.sun.com/javase/6/docs/api/java/io/PrintWriter.html" class="javadoc">PrintWriter</a> has been closed, or</li><li>the service method (doGet, doPost etc) has finished.</li></ul></li><li>Use <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/getBufferSize.html" class="javadoc">getBufferSize</a> to get the buffer size.</li><li>You may set the buffer size with <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/setBufferSize.html" class="javadoc">setBufferSize</a>, but only <em>before getting the stream/writer</em>.</li><li><em>The response is <span class="idf">committed</span></em> as soon as data has been sent to the client. </li><li>Find out whether the response is committed using <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/isCommitted.html" class="javadoc">isCommitted</a>.</li><li>The following things are only allowed <em>before the response is committed</em>: <ul><li>setting headers (<a href="#" id="tl-d22757e3995" class="dottedTooltip" onclick="return tlClick('tl-d22757e3995','pp-d22757e3995');" onmouseover="return tlOver('tl-d22757e3995','pp-d22757e3995');" onmouseout="return tlOut('tl-d22757e3995','pp-d22757e3995');">more</a>)</li><li>clearing the buffer with <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/resetBuffer.html" class="javadoc">resetBuffer</a> (<a href="#" id="tl-d22757e4003" class="dottedTooltip" onclick="return tlClick('tl-d22757e4003','pp-d22757e4003');" onmouseover="return tlOver('tl-d22757e4003','pp-d22757e4003');" onmouseout="return tlOut('tl-d22757e4003','pp-d22757e4003');">more</a>)</li><li>clearing buffer and headers with <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/reset.html" class="javadoc">reset</a> (<a href="#" id="tl-d22757e4020" class="dottedTooltip" onclick="return tlClick('tl-d22757e4020','pp-d22757e4020');" onmouseover="return tlOver('tl-d22757e4020','pp-d22757e4020');" onmouseout="return tlOut('tl-d22757e4020','pp-d22757e4020');">more</a>)</li></ul> </li></ul></div></div><div class="subSecRow2" id="sec_errors"><div class="subSecHead" id="sechd_errors"><a name="errors">Error Code</a><br/>(<a href="#" id="tl-d22757e4031" class="dottedTooltip" onclick="return tlClick('tl-d22757e4031','pp-d22757e4036');" onmouseover="return tlOver('tl-d22757e4031','pp-d22757e4036');" onmouseout="return tlOut('tl-d22757e4031','pp-d22757e4036');">more</a>)
		</div><div class="subSecContent" id="seccnt_errors"><pre class="subSecCode"><code>protected void <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html#doGet(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)" class="javadoc">doGet</a>(<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletRequest.html" class="javadoc">HttpServletRequest</a> request, <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html" class="javadoc">HttpServletResponse</a> response)
    throws <a href="http://java.sun.com/javase/6/docs/api/java/io/IOException.html" class="javadoc">IOException</a> {

  <span class="cmt">// send status code 403 (<a href="#" id="tl-d22757e4090" class="dottedTooltip" onclick="return tlClick('tl-d22757e4090','pp-d22757e4090');" onmouseover="return tlOver('tl-d22757e4090','pp-d22757e4090');" onmouseout="return tlOut('tl-d22757e4090','pp-d22757e4090');">more</a>):</span>
  response.<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html#sendError(int, java.lang.String)" class="javadoc"><em>sendError</em></a>(<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html#SC_FORBIDDEN" class="javadoc">HttpServletResponse.SC_FORBIDDEN</a>, "Access not allowed");
  <span class="cmt">// Important: return from service method immediately (<a href="#" id="tl-d22757e4118" class="dottedTooltip" onclick="return tlClick('tl-d22757e4118','pp-d22757e4118');" onmouseover="return tlOver('tl-d22757e4118','pp-d22757e4118');" onmouseout="return tlOut('tl-d22757e4118','pp-d22757e4118');">more</a>)</span>
}
</code></pre></div></div><div class="subSecRow1" id="sec_redirection"><div class="subSecHead" id="sechd_redirection"><a name="redirection">Redirection</a><br/>(<a href="#" id="tl-d22757e4139" class="dottedTooltip" onclick="return tlClick('tl-d22757e4139','pp-d22757e4144');" onmouseover="return tlOver('tl-d22757e4139','pp-d22757e4144');" onmouseout="return tlOut('tl-d22757e4139','pp-d22757e4144');">more</a>)
		</div><div class="subSecContent" id="seccnt_redirection"><pre class="subSecCode"><code>protected void <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServlet.html#doGet(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)" class="javadoc">doGet</a>(<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletRequest.html" class="javadoc">HttpServletRequest</a> request, <a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html" class="javadoc">HttpServletResponse</a> response)
    throws <a href="http://java.sun.com/javase/6/docs/api/java/io/IOException.html" class="javadoc">IOException</a> {

  response.<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html#sendRedirect(java.lang.String)" class="javadoc"><em>sendRedirect</em></a>("http://jarfiller.com/");
  <span class="cmt">// Important: return from service method immediately (<a href="#" id="tl-d22757e4194" class="dottedTooltip" onclick="return tlClick('tl-d22757e4194','pp-d22757e4118');" onmouseover="return tlOver('tl-d22757e4194','pp-d22757e4118');" onmouseout="return tlOut('tl-d22757e4194','pp-d22757e4118');">more</a>)</span>
}
</code></pre></div></div><div class="yahbar"><div class="yahprev"><a href="servlets.xhtml">Prev<br/><span>Servlets</span></a></div><div class="yahhere"><a href="#" onclick="return navToggle();">Servlet 2.5 Guide / Responses</a><br/><a href="/guide/servlet25/"><span>Single Page Mode</span></a>, <a href="#" onclick="return navToggle();"><span>Show Table of Content</span></a></div><div class="yahnext"><a href="requests.xhtml">Next<br/><span>Requests</span></a></div></div></div><div id="sidecolumn">
    	<div><h3>Useful Links</h3><div class="sidecolumnSubTitleLine"/>
	  			<a href="http://java.sun.com/products/servlet/">Servlet Homepage</a><br/>
	  			<a href="http://en.wikipedia.org/wiki/Java_Servlet">Servlet on Wikipedia</a><br/>
	  			<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/package-summary.html">javax.servlet API Docs</a><br/>
	  			<a href="http://java.sun.com/javaee/5/docs/api/javax/servlet/package-summary.html">javax.servlet.http API Docs</a><br/>
	  			<a href="http://jcp.org/aboutJava/communityprocess/mrel/jsr154/index2.html">Servlet 2.5 Specification</a><br/>
	  		</div>
  		
  		<div><h3>Related Documents</h3><div class="sidecolumnSubTitleLine">(on Jarfiller.com)</div>
	  			<a href="/reference/webxml2x/">Web.xml Reference</a><br/>
	  		</div>
  	
  </div></div></div><div id="footer"><div id="footer-content"><div id="footer-left"><div class="footerLine"><a href="/">Home</a> - <a href="/about">About Jarfiller</a> - <a href="/imprint.xhtml">Imprint</a></div><div class="footerLine">Please send feedback and corrections to <a href="mailto:tim@tjansen.de">tim@<span style="display: none">got you</span>tjansen.de</a>.</div><div class="footerLine"><a href="http://www.twitter.com/timjansen">Follow</a> me on Twitter.</div><div class="copyrightLine">© 2010 Tim Jansen; content licensed under <a href="http://creativecommons.org/licenses/by/3.0/us/">cc-by</a>; example source code is public domain
				</div></div><div id="footer-right"><a rel="license" href="http://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="../../images/ext/cc-by-88x31.png"/></a></div></div></div><div id="navbar" onclick="return navToggle();" onmouseover="document.getElementById('navbar').className='mouseover';" onmouseout="document.getElementById('navbar').className='';"/><div id="navcontainer"><div id="navlinks"><div id="navclosebar"><a href="#" onclick="return navClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div><div id="navpositionbar" class="navpositionbar"/><h2 id="navtitle">Servlet 2.5 Guide</h2><a id="nav_overview" class="navseclink" href="overview.xhtml#overview">Overview</a><a id="nav_intro" class="navsublink" href="overview.xhtml#intro">Intro</a><a id="nav_usecases" class="navsublink" href="overview.xhtml#usecases">When should you write a Servlet?</a><a id="nav_requirements" class="navsublink" href="overview.xhtml#requirements">What do you need for Servlets?</a><a id="nav_containers" class="navsublink" href="overview.xhtml#containers">Which container supports which Servlet / JEE version?</a><a id="nav_httpintro" class="navsublink" href="overview.xhtml#httpintro">Short HTTP Introduction</a><a id="nav_servlets" class="navseclink" href="servlets.xhtml#servlets">Servlets</a><a id="nav_servletintro" class="navsublink" href="servlets.xhtml#servletintro">Servlet Intro</a><a id="nav_classoverview" class="navsublink" href="servlets.xhtml#classoverview">Class Overview</a><a id="nav_servletclass" class="navsublink" href="servlets.xhtml#servletclass">Servlet Class</a><a id="nav_servicemethods" class="navsublink" href="servlets.xhtml#servicemethods">Service Dispatching in the HttpServlet</a><a id="nav_lifecycle" class="navsublink" href="servlets.xhtml#lifecycle">The Servlet Lifecycle</a><a id="nav_multithreading" class="navsublink" href="servlets.xhtml#multithreading">Multithreading</a><a id="nav_twothreadsafeways" class="navsublink" href="servlets.xhtml#twothreadsafeways">Two Simple Ways to Write Thread-Safe Servlets</a><a id="nav_webapplications" class="navsublink" href="servlets.xhtml#webapplications">Web Applications</a><a id="nav_webxml" class="navsublink" href="servlets.xhtml#webxml">web.xml</a><a id="nav_applayout" class="navsublink" href="servlets.xhtml#applayout">Example Application Layout</a><a id="nav_contextroot" class="navsublink" href="servlets.xhtml#contextroot">Context Root</a><a id="nav_staticcontent" class="navsublink" href="servlets.xhtml#staticcontent">Static Content</a><a id="nav_eclipse" class="navsublink" href="servlets.xhtml#eclipse">How to Create a Web Application with Eclipse</a><a id="nav_ant" class="navsublink" href="servlets.xhtml#ant">How to Create a Web Application (WAR) with Ant</a><a id="nav_tomcat" class="navsublink" href="servlets.xhtml#tomcat">How to Deploy a Web Application on Tomcat</a><a id="nav_responses" class="navseclink" href="#responses" onclick="if (event.button == 0) return goTo('#responses', true); else return true;">Responses</a><a id="nav_textoutput" class="navsublink" href="#textoutput" onclick="if (event.button == 0) return goTo('#textoutput', true); else return true;">Text Output</a><a id="nav_responsebinary" class="navsublink" href="#responsebinary" onclick="if (event.button == 0) return goTo('#responsebinary', true); else return true;">Binary Output</a><a id="nav_buffering" class="navsublink" href="#buffering" onclick="if (event.button == 0) return goTo('#buffering', true); else return true;">Buffering and Committing</a><a id="nav_errors" class="navsublink" href="#errors" onclick="if (event.button == 0) return goTo('#errors', true); else return true;">Error Code</a><a id="nav_redirection" class="navsublink" href="#redirection" onclick="if (event.button == 0) return goTo('#redirection', true); else return true;">Redirection</a><a id="nav_requests" class="navseclink" href="requests.xhtml#requests">Requests</a><a id="nav_reqparameters" class="navsublink" href="requests.xhtml#reqparameters">Request Parameters</a><a id="nav_parameternames" class="navsublink" href="requests.xhtml#parameternames">How to find out which parameters have been sent</a><a id="nav_headers" class="navsublink" href="requests.xhtml#headers">How to read header values</a><a id="nav_paths" class="navsublink" href="requests.xhtml#paths">Paths</a><a id="nav_sessionsandcookies" class="navseclink" href="sessionsandcookies.xhtml#sessionsandcookies">Sessions and Cookies</a><a id="nav_cookies" class="navsublink" href="sessionsandcookies.xhtml#cookies">Cookies</a><a id="nav_sessions" class="navsublink" href="sessionsandcookies.xhtml#sessions">Sessions</a><a id="nav_distributablesessions" class="navsublink" href="sessionsandcookies.xhtml#distributablesessions">Sessions in Distributed Servers (Clusters)</a><a id="nav_sessioncaveat" class="navsublink" href="sessionsandcookies.xhtml#sessioncaveat">Be Careful When Using HttpSession</a><a id="nav_resources" class="navseclink" href="resources.xhtml#resources">Resources</a><a id="nav_resourceannotations" class="navsublink" href="resources.xhtml#resourceannotations">Resource Annotations</a><a id="nav_jndilookup" class="navsublink" href="resources.xhtml#jndilookup">How to get resources with JNDI</a><a id="nav_tomcatresources" class="navsublink" href="resources.xhtml#tomcatresources">How to Provide Resources in Tomcat</a><span class="navseclink">How to... Requests and Responses</span><a id="nav_customheaders" class="navsublink" href="customheaders.xhtml#customheaders">How to Read and Write Additional Headers</a><a id="nav_attributes" class="navsublink" href="attributes.xhtml#attributes">How to Use Attributes in Request and Context</a><a id="nav_getlastmodified" class="navsublink" href="getlastmodified.xhtml#getlastmodified">How to Use HttpServlet.getLastModified to Improve Client-Side Caching</a><a id="nav_contentlength" class="navsublink" href="contentlength.xhtml#contentlength">How to Set the Content Length</a><a id="nav_fileupload" class="navsublink" href="fileupload.xhtml#fileupload">How to Receive File Uploads (Multi-Part File Upload)</a><a id="nav_browserdetection" class="navsublink" href="browserdetection.xhtml#browserdetection">How to Detect the User's Web Browser</a><a id="nav_contentlanguage" class="navsublink" href="contentlanguage.xhtml#contentlanguage">How to Declare the Content Language</a><a id="nav_acceptedlanguages" class="navsublink" href="acceptedlanguages.xhtml#acceptedlanguages">How to Detect the Client's Preferred Languages</a><a id="nav_sendingxml" class="navsublink" href="sendingxml.xhtml#sendingxml">How to Send XML as Response</a><a id="nav_dynamicimages" class="navsublink" href="dynamicimages.xhtml#dynamicimages">How to Generate Images as Response</a><a id="nav_jspforward" class="navsublink" href="jspforward.xhtml#jspforward">How to Use a JSP as Template</a><a id="nav_requestdispatcher" class="navsublink" href="requestdispatcher.xhtml#requestdispatcher">How to Invoke Servlets and JSPs with the RequestDispatcher</a><a id="nav_virtualhosts" class="navsublink" href="virtualhosts.xhtml#virtualhosts">How to Handle Virtual Hosts and Multiple IP Addresses?</a><a id="nav_filters" class="navsublink" href="filters.xhtml#filters">How to Write Filters</a><span class="navseclink">How to... Sessions and Security</span><a id="nav_usermanagement" class="navsublink" href="usermanagement.xhtml#usermanagement">How to Authenticate and Manage Users</a><a id="nav_declarativesecurity" class="navsublink" href="declarativesecurity.xhtml#declarativesecurity">How to Restrict Access to a Web Application (Declarative Security)</a><a id="nav_requiringssl" class="navsublink" href="requiringssl.xhtml#requiringssl">How to Require HTTPS / SSL</a><a id="nav_programmaticsecurity" class="navsublink" href="programmaticsecurity.xhtml#programmaticsecurity">How to Use Authentication Data in Servlets</a><a id="nav_cookielessessions" class="navsublink" href="cookielessessions.xhtml#cookielessessions">How to Use HttpSessions and Authentication without Cookies?</a><span class="navseclink">How to... General</span><a id="nav_addinglibraries" class="navsublink" href="addinglibraries.xhtml#addinglibraries">How to Add Libraries to a Web Application / WAR</a><a id="nav_addingresourcefiles" class="navsublink" href="addingresourcefiles.xhtml#addingresourcefiles">How to Read Files Contained in a Web Application / WAR</a><a id="nav_throwingexceptions" class="navsublink" href="throwingexceptions.xhtml#throwingexceptions">How to Throw Exceptions in Servlets</a><a id="nav_initparameters" class="navsublink" href="initparameters.xhtml#initparameters">Configure your Servlet with Initialization Parameters</a><a id="nav_logging" class="navsublink" href="logging.xhtml#logging">How to Log</a><a id="nav_errorpages" class="navsublink" href="errorpages.xhtml#errorpages">How to Replace the Default Error Page</a><a id="nav_temporarydirectory" class="navsublink" href="temporarydirectory.xhtml#temporarydirectory">How to Get a Temporary Directory</a><a id="nav_ejbinvocation" class="navsublink" href="ejbinvocation.xhtml#ejbinvocation">How to Access an EJB</a><a id="nav_distributedapps" class="navsublink" href="distributedapps.xhtml#distributedapps">How to Create a Distributed Application</a><a id="nav_listeners" class="navsublink" href="listeners.xhtml#listeners">How to Be Notified about Events (Listeners)</a><a id="nav_servlet24" class="navsublink" href="servlet24.xhtml#servlet24">New Features Since Servlet API 2.4</a><a id="nav_andnow" class="navseclink" href="andnow.xhtml#andnow">And now...?</a><a id="nav_nextsteps" class="navsublink" href="andnow.xhtml#nextsteps">Next Steps</a></div></div><div id="popups"><div id="pp-d22757e3488" class="tooltip">Before you can send a text as response, you need to <em>set the content type</em> of the response (<span class="idf">setContentType</span>) and optionally the character encoding (<span class="idf">setCharacterEncoding</span>). Then <em>retrieve a <span class="idf">Writer</span></em> using <span class="idf">getWriter</span> from the <span class="idf">HttpServletResponse</span>, and use the <span class="idf">Writer</span>'s methods to write the body.</div><div id="pp-d22757e3574" class="tooltip">You must always set the <em>content type</em> of your response (also called <em>internet media type</em> or <em>MIME type</em>). Basically it does what file extensions do for files - telling the browser what kind of document it is receiving.<br/> A good entry point to find the right content type is the <a href="http://en.wikipedia.org/wiki/Internet_media_type">Internet Media Type 
page on Wikipedia</a>.<br/> For some text formats (HTML and plain text in particular), you should <em>specify the <span class="idf">charset</span> attribute</em>, as shown here, to tell the browser about the encoding you use. </div><div id="pp-d22757e3608" class="tooltip">Usually you can't do anything wrong when you set the character set to "UTF-8". It's widely supported and works with every character that is possible in Java. The default, "ISO-8859-1", only works with western european languages.</div><div id="pp-d22757e3625" class="tooltip">After setting headers (such as content type and character encoding), you need to <em>write the response body</em>. Here you have a choice between getting a <span class="idf">Writer</span> for text and getting an <span class="idf">OutputStream</span> for binary data. Once you have the <span class="idf">Writer</span> or <span class="idf">OutputStream</span>, just write your response. <br/> <em>Closing the stream is not required</em>, the web container will do this automatically as soon as the service method ends.</div><div id="pp-d22757e3687" class="tooltip">Before you can send a binary document as response, you need to <em>set the content type</em> (<span class="idf">setContentType</span>). Then <em>retrieve an <span class="idf">OutputStream</span></em> using <span class="idf">getOutputStream</span> from the <span class="idf">HttpServletResponse</span>, and use the <span class="idf">OutputStream</span>'s methods to write the body.</div><div id="pp-d22757e3995" class="tooltip">This includes every operation that modifies headers, including setting the content type, content length and setting cookies.</div><div id="pp-d22757e4003" class="tooltip">If you call <span class="idf">resetBuffer</span>, the buffer will be cleared, and anything that you have written so far will be discarded. This means, that you can start all over again. Unlike <span class="idf">reset</span>, <span class="idf">resetBuffer</span> will not modify headers.</div><div id="pp-d22757e4020" class="tooltip">If you call <span class="idf">reset</span>, all headers and the buffer will be cleared, and anything that you have written so far will be discarded. This means that you can start all over again.</div><div id="pp-d22757e4036" class="tooltip">The Servlet API has a simple convenience method to <em>send a standard error page</em> to the user. <br/>The standard error page should only be used <em>for unexpected errors</em> that users usually do not run into. For example, if your database is not available, the error page with error code may be ok. If the user entered a wrong value into a form, an error code is not appropriate and you should explain the user her mistake more gently.<br/> The <span class="idf">web.xml</span> deployment descriptor lets you customize the page that will be shown with the <span class="tag">&lt;<a href="#" id="tl-d22757e4052" class="tooltip" onclick="return tlClick('tl-d22757e4052','pp-d22757e503');" onmouseover="return tlOver('tl-d22757e4052','pp-d22757e503');" onmouseout="return tlOut('tl-d22757e4052','pp-d22757e503');">error-page</a>&gt;</span> element.<br/> <span class="idf">sendError</span> will only work correctly if the <em>response is not committed</em> yet.:</div><div id="pp-d22757e4090" class="tooltip">The <span class="idf">HttpServletResponse</span> class offers constants for all HTTP status codes. It will be shown to the user together with the text you provide as second argument. By default, the web container provides its own page to show. You can customize it in the <span class="idf">web.xml</span> deployment descriptor with the <span class="tag">&lt;<a href="#" id="tl-d22757e4098" class="tooltip" onclick="return tlClick('tl-d22757e4098','pp-d22757e503');" onmouseover="return tlOver('tl-d22757e4098','pp-d22757e503');" onmouseout="return tlOut('tl-d22757e4098','pp-d22757e503');">error-page</a>&gt;</span> element.</div><div id="pp-d22757e4118" class="tooltip">After invoking <span class="idf">sendError</span> or <span class="idf">sendRedirect</span> you should usually <em>return immediately from the service method</em>, as the response for the client has already been sent. It is a common error to forget a <span class="idf">return</span> after the invocation and go on processing, often leading to bugs that are hard to find.</div><div id="pp-d22757e4144" class="tooltip">To <em>redirect the client</em> to a different URL use the <span class="idf">sendRedirect</span> method. Redirecting is often useful for various reasons, but be careful with it: it breaks the back button for the user (if the user want to go back, she will be redirected again).<br/> <span class="idf">sendRedirect</span> will only work correctly if the <em>response is not committed</em> yet.</div><div id="pp-d22757e503" class="tooltip">Defines the page to be shown in case of the specified error. Optional, more than one allowed.</div><div id="ttCloseBar" class="closeBar"><a href="#" onclick="return tlClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div><div id="topicCloseBar" class="closeBar"><a href="#" onclick="return tpcClose();"><img src="../../images/close.png" height="16" width="16" alt="close"/></a></div></div></body></html>